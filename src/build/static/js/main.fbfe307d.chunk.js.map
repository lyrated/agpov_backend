{"version":3,"sources":["components/common/Header.js","components/common/Footer.js","components/Home.js","components/charts/timechart/BarChart.js","components/charts/timechart/BarChartStacked.js","components/charts/timechart/TimeChart.js","components/charts/timechart/Sidebar.js","components/common/Infobox.js","components/charts/timechart/Info.js","components/charts/genresdepartmentschart/RadialChart.js","components/charts/genresdepartmentschart/GenresDepartmentsChart.js","components/charts/genresdepartmentschart/Info.js","components/charts/genresdepartmentschart/Sidebar.js","components/charts/profitchart/ScatterPlot.js","components/charts/profitchart/ProfitChart.js","components/charts/profitchart/Sidebar.js","components/charts/profitchart/Info.js","components/charts/ChartsLayout.js","App.js","index.js"],"names":["Header","className","href","exact","to","activeClassName","Footer","Home","id","target","rel","role","BarChart","data","useEffect","margin","top","right","bottom","left","height","width","x","d3","domain","map","d","range","padding","y","rangeRound","yAxisValues","MIN_COLOR","MAX_COLOR","colors","xAxis","g","attr","call","tickValues","filter","i","length","tickSizeOuter","tooltip","append","style","svg","extent","max","Math","ceil","scaleExtent","translateExtent","on","event","transform","applyX","selectAll","bandwidth","chart","join","currentTarget","transition","duration","delay","html","pageX","pageY","setTimeout","text","ticks","tickFormat","bgGradient","BarChartStacked","props","columns","series","keys","slice","forEach","v","key","name","color","unknown","isNaN","toLocaleString","formatValue","legend","round","enter","iActors","indexOf","legend2","iCM","legend3","TimeChart","url","useState","setData","loading","setLoading","error","setError","urlString","Object","u","fetch","then","res","json","catch","JSON","stringify","category","TimeChartSidebar","setUrl","GENRES","all","action","adventure","animation","comedy","crime","documentary","drama","family","fantasy","history","horror","music","mystery","romance","sciencefiction","tvmovie","thriller","war","western","start","setStart","end","setEnd","genre","setGenre","dep","setDep","cat","handleInputChange","useCallback","e","yearsOptions","push","genresOptions","value","defaultValue","onChange","onClick","Infobox","xmlns","fill","viewBox","TimeChartInfo","textCat","show","setShow","handleClose","Button","variant","Modal","onHide","closeButton","Title","Body","RadialChart","clicked","p","depth","backLabel","parent","goBackLabel","datum","root","each","x0","min","x1","PI","y0","y1","t","path","tween","current","this","getAttribute","arcVisible","attrTween","arc","label","labelVisible","labelTransform","radius","startAngle","endAngle","padAngle","padRadius","innerRadius","outerRadius","children","format","formatPercentage","sum","sort","a","b","size","partition","hideTooltip","descendants","parentString","ancestors","toLowerCase","percentage","reverse","showTooltip","GenresDeparmentsChart","GenresDepartmentsInfo","dataset","time","GenresDepartmentsSidebar","DEFAULT_DATA","setDataset","setTime","isActive","handleTimeChange","handleDatasetChange","checked","class","type","htmlFor","ScatterPlot","formatDollar","avgBudget","avgRevenue","nice","shape","s","select","remove","tooltipMouseout","categories","Set","colorChange","col","c","revenue","budget","profit","_id","count","pos","tooltipMouseover","labels","ProfitChart","ProfitChartSidebar","depsOptions","acting","directing","production","writing","ProfitChartInfo","ChartsLayout","timeUrl","setTimeUrl","gdUrl","setGdUrl","profitUrl","setProfitUrl","render","App","component","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.fbfe307d.chunk.js","sourcesContent":["import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nfunction Header() {\r\n  return (\r\n    <header className=\"row m-0\">\r\n      <div className=\"col-12 col-xl-6 p-0\">\r\n        <a href=\"/\"><h1>A gendered point of view</h1></a>\r\n        <p className=\"subtitle\">Visualizing gender distribution in the movie industry</p>\r\n      </div>\r\n\r\n      {/* Navigation */}\r\n      <div className=\"col p-0\">\r\n        <nav className=\"navbar navbar-expand-md px-0\">\r\n          <ul className=\"navbar-nav mx-auto ml-md-auto\">\r\n            <li className=\"nav-item\">\r\n              <NavLink exact to=\"/\" activeClassName=\"active\" className=\"nav-link\">Home</NavLink>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n              <NavLink to=\"/time\" activeClassName=\"active\" className=\"nav-link\">Distribution over time</NavLink>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n              <NavLink to=\"/genres\" activeClassName=\"active\" className=\"nav-link\">Genres &amp; Departments</NavLink>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n              <NavLink to=\"/profit\" activeClassName=\"active\" className=\"nav-link\">Budget &amp; Revenue</NavLink>\r\n            </li>\r\n          </ul>\r\n        </nav>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\n\r\nfunction Footer() {\r\n  return (\r\n    <footer>\r\n      <p>\r\n        Copyright &#169; 2021 M. L. Nguyen. <em>This web app is part of my bachelor thesis at HTW Berlin. This product uses the TMDB API but is not endorsed or certified by TMDB. (data retrieved on April 12th, 2021)</em>\r\n      </p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nfunction Home() {\r\n  return (\r\n    <main id=\"home\" className=\"row justify-content-center\">\r\n      <div className=\"title\">\r\n        <h2>Where are the women?</h2>\r\n      </div>\r\n      <div className=\"welcome\">\r\n        <p className=\"font-weight-bold\">\r\n          Welcome to my final thesis project!\r\n        </p>\r\n        <p>\r\n          My topic for the thesis is <strong>data visualization</strong>. I chose the database <a href=\"https://tmdb.org/\" target=\"_blank\" rel=\"noopener noreferrer\">TMDb.org</a> with over 554K movies listed to make charts about the <strong>gender distribution</strong> in the movie industry with the help of the D3.js library. Precisely, I want to find out:\r\n        </p>\r\n        <ul>\r\n          <li><em>How has the share of women changed over the years?</em></li>\r\n          <li><em>How many women work in each department and movie genre?</em></li>\r\n          <li><em>How much money is involved when women work on movies?</em></li>\r\n        </ul>\r\n        <div className=\"pb-3 text-center\">\r\n          <NavLink to=\"/time\" className=\"btn btn-primary px-3\" role=\"button\">Go to the first chart</NavLink>\r\n        </div>\r\n        <p>\r\n          If you find any technical errors, please contact me with screenshots included! You can reach me via <a href=\"mailto:Mai-Ly.Nguyen@Student.HTW-Berlin.de\" target=\"_blank\" rel=\"noopener noreferrer\">e-mail</a> or on Discord at <strong>miyla#1024</strong>.\r\n        </p>\r\n        <p className=\"text-right text-info\">\r\n          - <em>Ly</em>\r\n        </p>\r\n        <p className=\"small pb-0\">\r\n          <em>Disclaimer:</em> In this project I only analyze people identified as female or male, but this does not mean that I want to push the agenda that there are only two genders. Unfortunately, there was not enough data to mention other genders in the charts.\r\n        </p>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Home;","import React, { useEffect } from 'react';\r\nimport * as d3 from 'd3';\r\n\r\nfunction BarChart({ data }) {\r\n  useEffect(() => {\r\n    if (data !== null && !data.data) {\r\n      let margin = { top: 30, right: 30, bottom: 30, left: 50 },\r\n        height = 450 - margin.top - margin.bottom,\r\n        width = 900 - margin.right - margin.left;\r\n\r\n      let x = d3.scaleBand()\r\n        .domain(data.map(d => d.x))\r\n        .range([0, width])\r\n        .padding(0.05);\r\n\r\n      let y = d3.scaleLinear()\r\n        .domain([0, 50])\r\n        .rangeRound([0, height]);\r\n      let yAxisValues = d3.scaleLinear()\r\n        .domain([0, 50])\r\n        .rangeRound([height, 0]);\r\n\r\n      const MIN_COLOR = d3.schemePuRd[5][0];\r\n      const MAX_COLOR = d3.schemePuRd[5][4];\r\n      let colors = d3.scaleLinear()\r\n        .domain([d3.min(data, d => d.y), d3.max(data, d => d.y)])\r\n        .range([MIN_COLOR, MAX_COLOR]);\r\n\r\n      let xAxis = g => g\r\n        .attr('transform', `translate(${margin.left},${height + margin.top})`)\r\n        .call(d3.axisBottom(x)\r\n          .tickValues(x.domain().filter(function (d, i) {\r\n            if (data.length <= 30) return d;\r\n            if (data.length <= 50) return !(i % 2);\r\n            return !(i % 5);\r\n          }))\r\n          .tickSizeOuter(0));\r\n\r\n      let yAxis = g => g\r\n        .attr('transform', `translate(${margin.left},${margin.top})`)\r\n        .call(d3.axisLeft(yAxisValues).ticks(null, 's').tickFormat(d => d + '%'));\r\n\r\n      let tooltip = d3.select('body')\r\n        .append('div')\r\n        .style('position', 'absolute')\r\n        .style('padding', '0 10px')\r\n        .style('background', '#F0F0FA')\r\n        .style('display', 'none')\r\n        .style('opacity', 0)\r\n        .style('font-size', '14px')\r\n        .style('color', 'black');\r\n\r\n      const svg = d3.select('#time-chart').append('svg')\r\n        .attr('viewBox',\r\n          [0, 0, width + margin.right + margin.left, height + margin.top + margin.bottom + 10])\r\n        .call(zoom);\r\n\r\n      const chart = svg.append('g')\r\n        .attr('transform', `translate(${margin.left}, ${margin.top})`)\r\n        .attr('class', 'bars')\r\n        .selectAll('rect')\r\n        .data(data)\r\n        .join('rect')\r\n        .attr('fill', d => colors(d.y))\r\n        .attr('x', (d, i) => x(d.x))\r\n        .attr('y', d => height)\r\n        .attr('width', x.bandwidth())\r\n        .attr('height', 0)\r\n        // on mouseover event\r\n        .on('mouseover', (event, d) => {\r\n          d3.select(event.currentTarget)\r\n            .style('opacity', 0.9);\r\n          tooltip.transition()\r\n            .duration(100)\r\n            .delay(500)\r\n            .style('opacity', 0.9)\r\n            .style('display', 'block');\r\n          tooltip.html(d.x + ': ' + d.y + '%')\r\n            .style('left', (event.pageX + 10) + 'px')\r\n            .style('top', (event.pageY - 20) + 'px');\r\n          setTimeout(() => {\r\n            tooltip.style('opacity', 0).style('display', 'none');\r\n          }, 5000);\r\n        })\r\n        .on('mouseout', (event, d) => {\r\n          d3.select(event.currentTarget)\r\n            .style('opacity', 1);\r\n          tooltip\r\n            .style('opacity', 0)\r\n            .style('display', 'none');\r\n        });\r\n\r\n      // guides\r\n      svg.append('g')\r\n        .attr('class', 'x-axis')\r\n        .call(xAxis);\r\n      svg.append('text')\r\n        .attr('x', width / 2 + margin.left)\r\n        .attr('y', height + margin.top + margin.bottom + 5)\r\n        .attr('fill', '#FDC170')\r\n        .style('font-size', '10pt')\r\n        .style('text-anchor', 'middle')\r\n        .text('years');\r\n\r\n      svg.append('g')\r\n        .attr('class', 'y-axis')\r\n        .call(yAxis);\r\n      svg.append('text')\r\n        .attr('x', 0)\r\n        .attr('y', 15)\r\n        .attr('fill', '#FDC170')\r\n        .style('font-size', '10pt')\r\n        .text('% of women from all credits');\r\n\r\n      // legend\r\n      const bgGradient = svg.append('linearGradient')\r\n        .attr('id', 'bg-gradient');\r\n      bgGradient\r\n        .append('stop')\r\n        .attr('stop-color', MIN_COLOR)\r\n        .attr('offset', '0%');\r\n      bgGradient\r\n        .append('stop')\r\n        .attr('stop-color', MAX_COLOR)\r\n        .attr('offset', '100%');\r\n\r\n      svg.append('text')\r\n        .attr('x', width / 4 * 3)\r\n        .attr('y', 30)\r\n        .attr('fill', 'white')\r\n        .attr('text-anchor', 'end')\r\n        .style('font-size', '12px')\r\n        .text(d3.format(\".1f\")(d3.min(data, d => d.y)) + '%');\r\n      svg.append('rect')\r\n        .attr('x', width / 4 * 3 + 10)\r\n        .attr('y', 20)\r\n        .attr('width', 200)\r\n        .attr('height', 10)\r\n        .style('fill', 'url(#bg-gradient)');\r\n      svg.append('text')\r\n        .attr('x', width / 4 * 3 + 220)\r\n        .attr('y', 30)\r\n        .attr('fill', 'white')\r\n        .style('font-size', '12px')\r\n        .text(d3.format(\".1f\")(d3.max(data, d => d.y)) + '%');\r\n\r\n      // animation\r\n      chart.transition()\r\n        .attr('height', (d) => y(d.y))\r\n        .attr('y', (d, i) => height - y(d.y))\r\n        .duration(50)\r\n        .delay((d, i) => {\r\n          return i * 5\r\n        });\r\n\r\n      // if data is empty:\r\n      if (data.length === 0) {\r\n        svg.append('text')\r\n          .attr('x', width / 2 + margin.right)\r\n          .attr('y', height / 2 + margin.top)\r\n          .attr('text-anchor', 'middle')\r\n          .attr('fill', 'white')\r\n          .style('font-size', '16px')\r\n          .text('This result contains no data. Please change your filters.');\r\n      }\r\n\r\n      /**\r\n       * Zoomable Bar Chart Code from https://observablehq.com/@d3/zoomable-bar-chart\r\n       */\r\n      function zoom(svg) {\r\n        const extent = [[margin.left, margin.top], [width, height]];\r\n\r\n        const max = Math.max(Math.ceil(data.length / 10), 2);\r\n        svg.call(d3.zoom()\r\n          .scaleExtent([1, max])\r\n          .translateExtent(extent)\r\n          .extent(extent)\r\n          .on('zoom', zoomed));\r\n\r\n        function zoomed(event) {\r\n          x.range([0, width].map(d => event.transform.applyX(d)));\r\n          svg.selectAll('.bars rect').attr('x', d => x(d.x)).attr('width', x.bandwidth());\r\n          svg.selectAll('.x-axis').call(xAxis);\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  return (\r\n    <div id=\"time-chart\" className=\"diagram\"></div>\r\n  );\r\n}\r\n\r\nexport default BarChart;","import React, { useEffect } from 'react';\r\nimport * as d3 from 'd3';\r\n\r\n/**\r\n * Stacked Bar Chart Base Code from https://observablehq.com/@d3/stacked-bar-chart\r\n */\r\nfunction BarChartStacked(props) {\r\n  useEffect(() => {\r\n    if (props.data !== null && props.data.data) {\r\n      const data = props.data.data;\r\n      const columns = props.data.columns;\r\n\r\n      let margin = { top: 30, right: 30, bottom: 30, left: 50 },\r\n        height = 450 - margin.top - margin.bottom,\r\n        width = 900 - margin.right - margin.left;\r\n\r\n      let series = d3.stack()\r\n        .keys(columns.slice(1))(data)\r\n        .map(d => (d.forEach(v => v.key = d.key), d));\r\n\r\n      let x = d3.scaleBand()\r\n        .domain(data.map(d => d.name))\r\n        .range([0, width])\r\n        .padding(0.1);\r\n\r\n      let y = d3.scaleLinear()\r\n        .domain([0, 50])\r\n        .rangeRound([height, 0]);\r\n\r\n      const colors = [\r\n        '#999999', '#A42147', '#2D847B', '#F3A712', '#FDAAA0',\r\n        '#DE3F4C', '#66A0ED', '#42C3A8', '#F9CD44', '#EA7073',\r\n        '#57A3C7', '#9381FF', '#0EE0D2', '#FFF275', '#CC3E55',\r\n        '#B96481', '#08627C', '#FCD491', '#70FF8D', '#6652D4'\r\n      ];\r\n      let color = d3.scaleOrdinal()\r\n        .domain(series.map(d => d.key))\r\n        .range(colors)\r\n        .unknown('#ccc');\r\n\r\n      let xAxis = g => g\r\n        .attr('transform', `translate(${margin.left},${height + margin.top})`)\r\n        .call(d3.axisBottom(x)\r\n          .tickValues(x.domain().filter(function (d, i) {\r\n            return !(i % 5);\r\n          })));\r\n\r\n      let yAxis = g => g\r\n        .attr('transform', `translate(${margin.left},${margin.top})`)\r\n        .call(d3.axisLeft(y).ticks(null, 's').tickFormat(d => d + '%'));\r\n\r\n      let formatValue = x => isNaN(x) ? 'N/A' : x.toLocaleString('en');\r\n\r\n      let tooltip = d3.select('body')\r\n        .append('div')\r\n        .style('position', 'absolute')\r\n        .style('padding', '0 10px')\r\n        .style('background', '#F0F0FA')\r\n        .style('display', 'block')\r\n        .style('opacity', 0)\r\n        .style('font-size', '14px')\r\n        .style('color', 'black');\r\n\r\n      const svg = d3.select('#time-chart').append('svg')\r\n        .attr('viewBox',\r\n          [0, 0, width + margin.right + margin.left, height + margin.top + margin.bottom + 10])\r\n        .call(zoom);\r\n\r\n      const chart = svg.append('g')\r\n        .attr('transform', `translate(${margin.left}, ${margin.top})`)\r\n        .attr('class', 'bars')\r\n        .selectAll('g')\r\n        .data(series)\r\n        .join('g')\r\n        .attr('fill', d => color(d.key))\r\n        .selectAll('rect')\r\n        .data(d => d)\r\n        .join('rect')\r\n        .attr('x', (d, i) => x(d.data.name))\r\n        .attr('y', height)\r\n        .attr('height', 0)\r\n        .attr('width', x.bandwidth())\r\n        // on mouseover event\r\n        .on('mouseover', (event, d) => {\r\n          d3.select(event.currentTarget)\r\n            .style('opacity', 0.9);\r\n          tooltip.transition().duration(100)\r\n            .style('opacity', 0.9)\r\n            .style('display', 'block');\r\n          tooltip.html(`${d.data.name}: ${d.key} - ${formatValue(d.data[d.key])}%`)\r\n            .style('left', (event.pageX + 10) + 'px')\r\n            .style('top', (event.pageY - 20) + 'px');\r\n          setTimeout(() => {\r\n            tooltip.style('opacity', 0).style('display', 'none');\r\n          }, 5000);\r\n        })\r\n        .on('mouseout', (event, d) => {\r\n          d3.select(event.currentTarget)\r\n            .style('opacity', 1);\r\n          tooltip\r\n            .style('opacity', 0)\r\n            .style('display', 'none');\r\n        });\r\n\r\n      // animation\r\n      chart.transition()\r\n        .attr('height', d => y(d[0]) - y(d[1]))\r\n        .attr('y', d => y(d[1]))\r\n        .duration(50)\r\n        .delay((d, i) => {\r\n          return i * 5\r\n        });\r\n\r\n      //guides\r\n      svg.append('g')\r\n        .attr('class', 'x-axis')\r\n        .call(xAxis);\r\n      svg.append('text')\r\n        .attr('x', width / 2)\r\n        .attr('y', height + margin.top + margin.bottom + 5)\r\n        .attr('fill', '#FDC170')\r\n        .style('font-size', '10pt')\r\n        .style('text-anchor', 'middle')\r\n        .text('years');\r\n\r\n      svg.append('g')\r\n        .attr('class', 'y-axis')\r\n        .call(yAxis);\r\n      svg.append('text')\r\n        .attr('x', 0)\r\n        .attr('y', 15)\r\n        .attr('fill', '#FDC170')\r\n        .style('font-size', '10pt')\r\n        .text('% of women from all credits');\r\n\r\n      // legend\r\n      const legend = columns.slice(1, Math.round(columns.length / 3) + 1);\r\n      svg.selectAll('legend')\r\n        .data(legend).enter()\r\n        .append('rect')\r\n        .attr('fill', d => color(d))\r\n        .attr('width', 10)\r\n        .attr('height', 10)\r\n        .attr('x', width / 5 * 3)\r\n        .attr('y', (d, i) => (i * 20) + 10);\r\n      // replace label for Actors to avoid confusion\r\n      let iActors = legend.indexOf('Actors');\r\n      if (iActors !== -1) {\r\n        legend[iActors] = 'Background Acting';\r\n      }\r\n      svg.selectAll('labels')\r\n        .data(legend).enter()\r\n        .append('text')\r\n        .attr('fill', 'white')\r\n        .attr('x', width / 5 * 3 + 15)\r\n        .attr('y', (d, i) => (i * 20) + 20)\r\n        .style('font-size', '12px')\r\n        .text(d => d);\r\n\r\n      const legend2 = columns.slice(Math.round(columns.length / 3) + 1, Math.round(columns.length / 3) * 2 + 1);\r\n      svg.selectAll('legend')\r\n        .data(legend2).enter()\r\n        .append('rect')\r\n        .attr('fill', d => color(d))\r\n        .attr('width', 10)\r\n        .attr('height', 10)\r\n        .attr('x', width / 5 * 3 + 125)\r\n        .attr('y', (d, i) => (i * 20) + 10);\r\n      // rename Costume & Make Up to shorten it\r\n      let iCM = legend2.indexOf('Costume & Make-Up');\r\n      if (iCM !== -1) {\r\n        legend2[iCM] = 'Costume/Make-Up';\r\n      }\r\n      svg.selectAll('labels')\r\n        .data(legend2).enter()\r\n        .append('text')\r\n        .attr('fill', 'white')\r\n        .attr('x', width / 5 * 3 + 15 + 125)\r\n        .attr('y', (d, i) => (i * 20) + 20)\r\n        .style('font-size', '12px')\r\n        .text(d => d);\r\n\r\n      const legend3 = columns.slice(Math.round(columns.length / 3) * 2 + 1);\r\n      svg.selectAll('legend')\r\n        .data(legend3).enter()\r\n        .append('rect')\r\n        .attr('fill', d => color(d))\r\n        .attr('width', 10)\r\n        .attr('height', 10)\r\n        .attr('x', width / 5 * 3 + 250)\r\n        .attr('y', (d, i) => (i * 20) + 10);\r\n      svg.selectAll('labels')\r\n        .data(legend3).enter()\r\n        .append('text')\r\n        .attr('fill', 'white')\r\n        .attr('width', 100)\r\n        .attr('x', width / 5 * 3 + 15 + 250)\r\n        .attr('y', (d, i) => (i * 20) + 20)\r\n        .style('font-size', '12px')\r\n        .text(d => d);\r\n\r\n      /**\r\n       * Zoomable Bar Chart Base Code from https://observablehq.com/@d3/zoomable-bar-chart\r\n       */\r\n      function zoom(svg) {\r\n        const extent = [[margin.left, margin.top], [width, height]];\r\n\r\n        const max = Math.max(Math.ceil(data.length / 10), 2);\r\n        svg.call(d3.zoom()\r\n          .scaleExtent([1, max])\r\n          .translateExtent(extent)\r\n          .extent(extent)\r\n          .on('zoom', zoomed));\r\n\r\n        function zoomed(event) {\r\n          x.range([0, width].map(d => event.transform.applyX(d)));\r\n          svg.selectAll('.bars rect').attr('x', d => x(d.data.name)).attr('width', x.bandwidth());\r\n          svg.selectAll('.x-axis').call(xAxis);\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  return (\r\n    <div id=\"time-chart\" className=\"diagram\"></div>\r\n  );\r\n}\r\n\r\nexport default BarChartStacked;","import React, { useState, useEffect } from 'react';\r\nimport BarChart from './BarChart';\r\nimport BarChartStacked from './BarChartStacked';\r\n\r\nfunction TimeChart({ url }) {\r\n  const [data, setData] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    let urlString = '';\r\n    Object.keys(url).forEach(u => {\r\n      urlString += '&' + u + '=' + url[u];\r\n    });\r\n    fetch('/api/time?size=1000&' + urlString)\r\n      .then(res => res.json())\r\n      .then(setData)\r\n      .then(() => setLoading(false))\r\n      .catch(setError);\r\n  }, [url]);\r\n\r\n  if (error) {\r\n    return <pre>{JSON.stringify(error, null, 2)}</pre>;\r\n  }\r\n\r\n  if (url.category === 'none') {\r\n    return (\r\n      <>\r\n        {loading && <p>LOADING...</p>}\r\n        {!loading && <BarChart data={data} />}\r\n      </>\r\n    );\r\n  } else {\r\n    return (\r\n      <>\r\n        {loading && <p>LOADING...</p>}\r\n        {!loading && <BarChartStacked data={data} />}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TimeChart;","import { React, useState, useCallback } from 'react';\r\n\r\nfunction TimeChartSidebar({ setUrl }) {\r\n  // constants\r\n  const START = 1920,\r\n    END = 2020,\r\n    GENRES = {\r\n      all: 'All', action: 'Action', adventure: 'Adventure',\r\n      animation: 'Animation', comedy: 'Comedy',\r\n      crime: 'Crime', documentary: 'Documentary',\r\n      drama: 'Drama', family: 'Family',\r\n      fantasy: 'Fantasy', history: 'History',\r\n      horror: 'Horror', music: 'Music',\r\n      mystery: 'Mystery', romance: 'Romance',\r\n      sciencefiction: 'Science Fiction', tvmovie: 'TV Movie',\r\n      thriller: 'Thriller', war: 'War', western: 'Western'\r\n    };\r\n\r\n  // hooks\r\n  const [start, setStart] = useState(START);\r\n  const [end, setEnd] = useState(END);\r\n  const [genre, setGenre] = useState('all');\r\n  const [dep, setDep] = useState('all');\r\n  // const [cat, setCat] = useState('none');\r\n  // const [selected, setSelected] = useState('none');\r\n  const cat = 'none';\r\n\r\n  // const handleCatChange = e => {\r\n  //   setCat(e.target.value);\r\n  //   setSelected(e.target.value);\r\n  // }\r\n\r\n  const handleGenreChange = e => {\r\n    setGenre(e.target.value);\r\n    // if (e.target.value !== 'all') {\r\n    //   setSelected('none');\r\n    //   setCat('none');\r\n    // }\r\n  }\r\n\r\n  const handleDepChange = e => {\r\n    setDep(e.target.value);\r\n    // if (e.target.value !== 'all') {\r\n    //   setSelected('none');\r\n    //   setCat('none');\r\n    // }\r\n  }\r\n\r\n  const handleInputChange = useCallback(e => {\r\n    setUrl({ start: start, end: end, genre: genre, dep: dep, category: cat });\r\n  }, [setUrl, start, end, genre, dep, cat]);\r\n\r\n  // select options\r\n  const yearsOptions = [];\r\n  for (let i = START; i <= END; i += 10) {\r\n    yearsOptions.push(<option key={i}>{i}</option>);\r\n  }\r\n\r\n  const genresOptions = [];\r\n  for (let g of Object.keys(GENRES)) {\r\n    genresOptions.push(<option key={g} value={g}>{GENRES[g]}</option>);\r\n  }\r\n\r\n  return (\r\n    <div className=\"sticky-top pt-3\">\r\n      <div className=\"pb-2\">\r\n        <h3>Select years:</h3>\r\n        <label className=\"mb-0\">Start</label>\r\n        <select className=\"custom-select\" name=\"start\" defaultValue={start} onChange={e => setStart(e.target.value)}>\r\n          {yearsOptions}\r\n        </select>\r\n        <label className=\"mt-2 mb-0\">End</label>\r\n        <select className=\"custom-select\" name=\"end\" defaultValue={end} onChange={e => setEnd(e.target.value)}>\r\n          {yearsOptions}\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"py-2\">\r\n        <h3>Select genre:</h3>\r\n        <select className=\"custom-select\" name=\"genre\" defaultValue={'all'} onChange={handleGenreChange}>\r\n          {genresOptions}\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"py-2\">\r\n        <h3>Select department:</h3>\r\n        <select className=\"custom-select\" name=\"dep\" defaultValue={'all'} onChange={handleDepChange}>\r\n          <option value=\"all\">All</option>\r\n          <option value=\"acting\">Acting</option>\r\n          <option value=\"writing\">Writing</option>\r\n          <option value=\"production\">Production</option>\r\n          <option value=\"directing\">Directing</option>\r\n        </select>\r\n      </div>\r\n\r\n      {/* <div className=\"pt-2\">\r\n        <h3>Divide into categories:</h3>\r\n        <select className=\"custom-select\" value={selected} name=\"cat\" onChange={handleCatChange}>\r\n          <option value=\"none\">None</option>\r\n          <option value=\"genres\" disabled={genre !== 'all' || dep !== 'all'}>Genres</option>\r\n          <option value=\"departments\" disabled={genre !== 'all' || dep !== 'all'}>Departments</option>\r\n        </select>\r\n        <p className=\"small\">Category can only be selected if 'All' is selected in above filters.</p>\r\n      </div> */}\r\n\r\n      <button className=\"btn btn-primary w-100 mt-2\"\r\n        onClick={handleInputChange}>Apply filters</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TimeChartSidebar;","import { React } from 'react';\r\n\r\nfunction Infobox({ text }) {\r\n  return (\r\n    <div className=\"row infobox m-3\">\r\n        <div className=\"col-auto my-auto text-center text-info\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" fill=\"currentColor\" className=\"bi bi-info-circle-fill\" viewBox=\"0 0 16 16\">\r\n            <path d=\"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z\" />\r\n          </svg>\r\n        </div>\r\n        <div className=\"col\">\r\n          <p className=\"mb-0\">\r\n            {text}\r\n          </p>\r\n        </div>\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default Infobox;","import { React, useState } from 'react';\r\nimport Infobox from '../../common/Infobox';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nfunction TimeChartInfo({ url }) {\r\n  let genre = url.genre === 'all' ? 'movies of all genres' : url.genre + ' movies';\r\n  let dep = url.dep === 'all' ? 'all departments' : url.dep;\r\n\r\n  let textCat = '';\r\n  if (url.category !== 'none') {\r\n    textCat = `The bars are divided into sections which show how many participated in which ${url.category}.`;\r\n    textCat += ' Hover over each section to get more information.';\r\n  }\r\n\r\n  const [show, setShow] = useState(false);\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  const text = <>This chart shows the percentages of women who worked in <strong>{dep}</strong> and <strong>{genre}\r\n    </strong> during the years <strong>{url.start} to {url.end}</strong> according to the movie credits. {textCat} <Button \r\n    variant=\"info\" onClick={handleShow}>Click here to read more.</Button></>;\r\n\r\n  return (\r\n    <>\r\n      <h2 className=\"text-center mb-0\">Women's participation in {genre} over the years {url.start} - {url.end}</h2>\r\n      <p className=\"text-center\">Double click or use your mousewheel to zoom in</p>\r\n      <Infobox text={text} />\r\n\r\n      {/* MODAL */}\r\n      <Modal show={show} onHide={handleClose}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title><h2 className=\"mb-0\">How this chart was made</h2></Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <p>This chart is based on credits of movies from many different countries which were taken from the TMDb.org database.</p>\r\n          <p>Not all movies had the full cast and crew listed.</p>\r\n          <p>The movies were grouped into <strong>years</strong> according to their release date. The chart excluded movies without release date.</p>\r\n          <p>It also <u>only</u> considers people who were marked with the gender <strong>female or male</strong>.</p>\r\n          <p>The numbers were calculated by counting all people listed as women, and dividing it by the sum of all female and male people.</p>\r\n          <p>Roughly <strong>36%</strong> of the credited people did not have any gender listed or were non-binary.</p>\r\n          <p>Unfortunately, non-binary people could not be included in this analysis as there was not enough data.</p>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"primary\" onClick={handleClose}>\r\n            Close\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default TimeChartInfo;","import React, { useEffect } from 'react';\r\nimport * as d3 from 'd3';\r\n\r\n/**\r\n * Zoomable Sunburst Base Code from https://observablehq.com/@d3/zoomable-sunburst\r\n */\r\nfunction RadialChart({ data }) {\r\n  useEffect(() => {\r\n    if (data != null) {\r\n      const width = 650;\r\n      const radius = width / 6;\r\n\r\n      const arc = d3.arc()\r\n        .startAngle(d => d.x0)\r\n        .endAngle(d => d.x1)\r\n        .padAngle(d => Math.min((d.x1 - d.x0) / 2, 0.005))\r\n        .padRadius(radius * 1.5)\r\n        .innerRadius(d => d.y0 * radius)\r\n        .outerRadius(d => Math.max(d.y0 * radius, d.y1 * radius - 1))\r\n\r\n      const partition = data => {\r\n        const root = d3.hierarchy(data)\r\n          .sum(d => d.value)\r\n          .sort((a, b) => b.value - a.value);\r\n        return d3.partition()\r\n          .size([2 * Math.PI, root.height + 1])\r\n          (root);\r\n      }\r\n\r\n      // colors\r\n      const color = d3.scaleOrdinal(d3.quantize(d3.interpolateRainbow, data.children.length + 1));\r\n\r\n      const getColor = d => {\r\n        if (d.depth === 3) {\r\n          if (d.data.name === \"Male\") return \"#FDC170\";\r\n          else if (d.data.name === \"Female\") return \"#D40242\";\r\n          else return \"#9A999F\";\r\n        }\r\n\r\n        while (d.depth > 1) d = d.parent;\r\n        return color(d.data.name);\r\n      }\r\n\r\n      const format = d3.format(\",d\");\r\n      const formatPercentage = d3.format(\".1f\");\r\n\r\n      const root = partition(data);\r\n\r\n      root.each(d => d.current = d);\r\n\r\n      // tooltip\r\n      const tooltip = d3.select(\"body\")\r\n        .append(\"div\")\r\n        .style(\"position\", \"absolute\")\r\n        .style(\"padding\", \"0.2rem 0.5rem\")\r\n        .style(\"background\", \"#F0F0FA\")\r\n        .style(\"display\", \"block\")\r\n        .style(\"opacity\", 0)\r\n        .style(\"font-size\", \"14px\")\r\n        .style(\"color\", \"black\");\r\n\r\n      const showTooltip = (event, d) => {\r\n        tooltip.transition().duration(100).delay(400)\r\n          .style(\"opacity\", 0.9)\r\n          .style(\"display\", \"block\");\r\n\r\n        let parentString = d.ancestors()[1].data.name.toLowerCase();\r\n        parentString = parentString === \"genres\" ? \"all \" + parentString : parentString;\r\n        const percentage = d.value / d.ancestors()[1].value * 100;\r\n        \r\n        tooltip.html(`<p class=\"small text-muted mb-1\">${d.ancestors().map(d => d.data.name).reverse().join(\" > \")}</p>${formatPercentage(percentage)}% of ${parentString}<br />(${format(d.value)} people)`)\r\n          .style(\"left\", (event.pageX + 40) + \"px\")\r\n          .style(\"top\", (event.pageY - 10) + \"px\");\r\n      }\r\n\r\n      const hideTooltip = () => {\r\n        tooltip\r\n          .style(\"opacity\", 0)\r\n          .style(\"display\", \"none\");\r\n      }\r\n\r\n      const svg = d3.select(\"#genres-departments-chart\").append(\"svg\")\r\n        .attr(\"viewBox\", [0, 0, width, width])\r\n        .style(\"font\", \"10px sans-serif\");\r\n\r\n      const g = svg.append(\"g\")\r\n        .attr(\"transform\", `translate(${width / 2},${width / 2})`);\r\n\r\n      const path = g.append(\"g\")\r\n        .selectAll(\"path\")\r\n        .data(root.descendants().slice(1))\r\n        .join(\"path\")\r\n        .attr(\"fill\", getColor)\r\n        .attr(\"fill-opacity\", d => arcVisible(d.current) ? 0.75 : 0)\r\n        .attr(\"d\", d => arc(d.current))\r\n        .on(\"mouseover\", (event, d) => {\r\n          if (arcVisible(d.current)) {\r\n            showTooltip(event, d);\r\n            setTimeout(hideTooltip, 10000);\r\n          }\r\n        })\r\n        .on(\"mouseout\", (event, d) => {\r\n          hideTooltip();\r\n        })\r\n        .on(\"click\", (event, d) => {\r\n          hideTooltip();\r\n        });\r\n\r\n      path.filter(d => d.children)\r\n        .style(\"cursor\", \"pointer\")\r\n        .on(\"click\", clicked);\r\n\r\n      const label = g.append(\"g\")\r\n        .attr(\"pointer-events\", \"none\")\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .style(\"user-select\", \"none\")\r\n        .attr(\"fill\", \"#D2D2DC\")\r\n        .selectAll(\"text\")\r\n        .data(root.descendants().slice(1))\r\n        .join(\"text\")\r\n        .attr(\"dy\", \"0.35em\")\r\n        .attr(\"fill-opacity\", d => +labelVisible(d.current))\r\n        .attr(\"transform\", d => labelTransform(d.current))\r\n        .text(d => d.data.name);\r\n\r\n      const parent = g.append(\"circle\")\r\n        .datum(root)\r\n        .attr(\"r\", radius)\r\n        .attr(\"fill\", \"none\")\r\n        .attr(\"pointer-events\", \"all\")\r\n        .on(\"click\", clicked);\r\n\r\n      const backLabel = g.append(\"text\")\r\n        .datum(root)\r\n        .attr(\"pointer-events\", \"all\")\r\n        .style(\"cursor\", \"default\")\r\n        .style(\"font-size\", \"10pt\")\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .attr(\"fill\", \"white\")\r\n        .attr(\"dy\", \"0\")\r\n        .text(\"Genres\")\r\n        .on(\"click\", clicked);\r\n      const goBackLabel = g.append(\"text\")\r\n        .datum(root)\r\n        .attr(\"pointer-events\", \"all\")\r\n        .style(\"cursor\", \"default\")\r\n        .style(\"font-size\", \"8pt\")\r\n        .attr(\"text-anchor\", \"middle\")\r\n        .attr(\"fill\", \"transparent\")\r\n        .attr(\"dy\", \"10pt\")\r\n        .text(\"Go back\")\r\n        .on(\"click\", clicked);\r\n\r\n      function clicked(event, p) {\r\n        if (p.depth > 0) {\r\n          backLabel\r\n            .style(\"cursor\", \"pointer\")\r\n            .text(`${p.parent.data.name} > ${p.data.name}`);\r\n          goBackLabel.transition().duration(750)\r\n            .style(\"cursor\", \"pointer\")\r\n            .attr(\"fill\", \"white\");\r\n        } else {\r\n          backLabel\r\n            .text(\"Genres\")\r\n            .style(\"cursor\", \"default\");\r\n          goBackLabel.transition().duration(750)\r\n            .style(\"cursor\", \"default\")\r\n            .attr(\"fill\", \"transparent\");\r\n        }\r\n\r\n        parent.datum(p.parent || root);\r\n        backLabel.datum(p.parent || root);\r\n        goBackLabel.datum(p.parent || root);\r\n\r\n        root.each(d => d.target = {\r\n          x0: Math.max(0, Math.min(1, (d.x0 - p.x0) / (p.x1 - p.x0))) * 2 * Math.PI,\r\n          x1: Math.max(0, Math.min(1, (d.x1 - p.x0) / (p.x1 - p.x0))) * 2 * Math.PI,\r\n          y0: Math.max(0, d.y0 - p.depth),\r\n          y1: Math.max(0, d.y1 - p.depth)\r\n        });\r\n\r\n        const t = g.transition().duration(750);\r\n\r\n        // Transition the data on all arcs, even the ones that arent visible,\r\n        // so that if this transition is interrupted, entering arcs will start\r\n        // the next transition from the desired position.\r\n        path.transition(t)\r\n          .tween(\"data\", d => {\r\n            const i = d3.interpolate(d.current, d.target);\r\n            return t => d.current = i(t);\r\n          })\r\n          .filter(function (d) {\r\n            return +this.getAttribute(\"fill-opacity\") || arcVisible(d.target);\r\n          })\r\n          .attr(\"fill-opacity\", d => arcVisible(d.target) ? 0.75 : 0)\r\n          .attrTween(\"d\", d => () => arc(d.current));\r\n\r\n        label.filter(function (d) {\r\n          return +this.getAttribute(\"fill-opacity\") || labelVisible(d.target);\r\n        }).transition(t)\r\n          .attr(\"fill-opacity\", d => +labelVisible(d.target))\r\n          .attrTween(\"transform\", d => () => labelTransform(d.current));\r\n      }\r\n\r\n      function arcVisible(d) {\r\n        return d.y1 <= 3 && d.y0 >= 1 && d.x1 > d.x0;\r\n      }\r\n\r\n      function labelVisible(d) {\r\n        return d.y1 <= 3 && d.y0 >= 1 && (d.y1 - d.y0) * (d.x1 - d.x0) > 0.03;\r\n      }\r\n\r\n      function labelTransform(d) {\r\n        const x = (d.x0 + d.x1) / 2 * 180 / Math.PI;\r\n        const y = (d.y0 + d.y1) / 2 * radius;\r\n        return `rotate(${x - 90}) translate(${y},0) rotate(${x < 180 ? 0 : 180})`;\r\n      }\r\n    }\r\n  });\r\n\r\n  return (\r\n    <div id=\"genres-departments-chart\" className=\"diagram\"></div>\r\n  );\r\n}\r\n\r\nexport default RadialChart;","import React, { useState, useEffect } from 'react';\r\nimport RadialChart from './RadialChart';\r\n\r\n\r\nfunction GenresDeparmentsChart({ url }) {\r\n  const [data, setData] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    let urlString = '';\r\n    Object.keys(url).forEach(u => {\r\n      urlString += '&' + u + '=' + url[u];\r\n    });\r\n    fetch('/api/genres-departments?size=10000' + urlString)\r\n      .then(res => res.json())\r\n      .then(setData)\r\n      .then(() => setLoading(false))\r\n      .catch(setError);\r\n  }, [url]);\r\n\r\n  if (error) {\r\n    return <pre>{JSON.stringify(error, null, 2)}</pre>;\r\n  }\r\n\r\n  return (\r\n    <section id=\"charts\">\r\n      {loading && <p>LOADING...</p>}\r\n      {!loading && <RadialChart data={data} />}\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default GenresDeparmentsChart;","import { React, useState } from 'react';\r\nimport Infobox from '../../common/Infobox';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nfunction GenresDepartmentsInfo({ url }) {\r\n  let dataset = url.dataset === 'all' ? '' : <strong> (excluding acting)</strong>;\r\n\r\n  const [show, setShow] = useState(false);\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  const text = <>This chart shows how many female and male people work in all movie genres and departments{dataset} during the years <strong>\r\n    {url.time} to {+url.time + 9}</strong> according to the movie credits. <Button variant=\"info\" onClick={handleShow}>\r\n      Click here to read more.</Button></>;\r\n\r\n  return (\r\n    <>\r\n      <h2 className=\"text-center mb-1\">Gender distribution in genres and departments in the {url.time}s</h2>\r\n      <p className=\"text-center\">Click on a section to zoom in or the center to zoom out</p>\r\n      <Infobox text={text} />\r\n\r\n      {/* MODAL */}\r\n      <Modal show={show} onHide={handleClose}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title><h2 className=\"mb-0\">How this chart was made</h2></Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <p>This chart is based on credits of movies from many different countries which were taken from the TMDb.org database.</p>\r\n          <p>Not all movies had the full cast and crew listed.</p>\r\n          <p>The people were grouped into <strong>movie genres</strong>, then their <strong>department</strong> and lastly the given <strong>gender</strong>. Movies without genres were excluded.</p>\r\n          <p>Movies with multiple genres were counted once for each of their genres.</p>\r\n          <p>The numbers were calculated by counting all people listed as female, male or undefined/non-binary of each group.</p>\r\n          <p>Non-binary people were grouped together with undefined gender, because the area would be too small to show up on the chart.</p>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"primary\" onClick={handleClose}>\r\n            Close\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default GenresDepartmentsInfo;","import { React, useState, useCallback } from 'react';\r\n\r\nfunction GenresDepartmentsSidebar({ setUrl }) {\r\n  // constants\r\n  const START = 1920,\r\n    END = 2020,\r\n    DEFAULT_DATA = 'crew';\r\n\r\n  // hooks\r\n  const [dataset, setDataset] = useState(DEFAULT_DATA);\r\n  const [time, setTime] = useState(2010);\r\n\r\n  const isActive = i => {\r\n    if (+time === i) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  const handleTimeChange = useCallback(e => {\r\n    setTime(e.target.id);\r\n    setUrl({ dataset: dataset, time: e.target.id });\r\n  }, [setUrl, setTime, dataset]);\r\n\r\n  const handleDatasetChange = useCallback(e => {\r\n    let value = e.target.checked ? e.target.value : DEFAULT_DATA;\r\n    setDataset(value);\r\n    setUrl({ dataset: value, time: time });\r\n  }, [setUrl, setDataset, time]);\r\n\r\n  // time interval\r\n  const yearsOptions = [];\r\n  for (let i = START; i < END; i += 10) {\r\n    yearsOptions.push(i);\r\n  }\r\n\r\n  return (\r\n    <div class=\"sticky-top pt-3\">\r\n      <h3>Select data:</h3>\r\n      <div className=\"form-check pb-4\">\r\n        <input type=\"checkbox\" id=\"data\" className=\"form-check-input\" value=\"all\" onChange={handleDatasetChange} />\r\n        <label htmlFor=\"data\" className=\"form-check-label\">include actors</label>\r\n      </div>\r\n      <div className=\"pb-2\">\r\n        <h3>Select time interval:</h3>\r\n        {yearsOptions.map(i => (\r\n          <button className={'timespan' + (isActive(i) ? ' active' : '')} key={i} id={i}\r\n            onClick={handleTimeChange}>{i} - {i + 9}</button>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default GenresDepartmentsSidebar;","import React, { useEffect } from 'react';\r\nimport * as d3 from 'd3';\r\n\r\n/**\r\n * Scatter Plot Base Code from https://observablehq.com/@d3/scatterplot-with-shapes\r\n */\r\nfunction ScatterPlot({ data }) {\r\n  useEffect(() => {\r\n    if (data != null) {\r\n      const margin = { top: 30, right: 30, bottom: 40, left: 40 },\r\n        height = 600 - margin.top - margin.bottom,\r\n        width = 850 - margin.right - margin.left;\r\n\r\n      const formatValue = d3.format(\".2s\");\r\n      const formatDollar = d3.format(\"$,d\");\r\n\r\n      const svg = d3.select(\"#profit-chart\").append(\"svg\")\r\n        .attr(\"viewBox\", [0, 0, width, height])\r\n        .call(zoom);\r\n\r\n      const x = d3.scaleLinear()\r\n        .domain(d3.extent(data, d => d.avgBudget)).nice()\r\n        .range([margin.left, width - margin.right]);\r\n\r\n      const y = d3.scaleLinear()\r\n        .domain(d3.extent(data, d => d.avgRevenue)).nice()\r\n        .range([height - margin.bottom, margin.top]);\r\n\r\n      const color = d3.scaleOrdinal().domain(data.map(d => d.category)).range(['#D93B63', '#01C6AC', '#01B4E4']);\r\n      const shape = d3.scaleOrdinal(data.map(d => d.category), d3.symbols.map(s => d3.symbol().size(80).type(s)()));\r\n\r\n      const xAxis = g => g\r\n        .attr(\"transform\", `translate(0,${height - margin.bottom})`)\r\n        .call(d3.axisBottom(x).ticks(width / 80).tickFormat(formatValue))\r\n        .call(g => g.select(\".domain\").remove())\r\n        .call(g => g.append(\"text\")\r\n          .attr(\"x\", width)\r\n          .attr(\"y\", margin.bottom - 4)\r\n          .attr(\"fill\", \"#FDC170\")\r\n          .attr(\"text-anchor\", \"end\")\r\n          .text(\"Avg. budget in million USD (inflation accounted)\"));\r\n\r\n      const yAxis = g => g\r\n        .attr(\"transform\", `translate(${margin.left},0)`)\r\n        .call(d3.axisLeft(y).tickFormat(formatValue))\r\n        .call(g => g.select(\".domain\").remove())\r\n        .call(g => g.append(\"text\")\r\n          .attr(\"x\", -margin.left)\r\n          .attr(\"y\", 10)\r\n          .attr(\"fill\", \"#FDC170\")\r\n          .attr(\"text-anchor\", \"start\")\r\n          .text(\"Avg. revenue in million USD (inflation accounted)\"));\r\n\r\n      // tooltip\r\n      const tooltip = d3.select('body')\r\n        .append('div')\r\n        .style('position', 'absolute')\r\n        .style('padding', '0.2rem 0.5rem')\r\n        .style('background', '#F0F0FA')\r\n        .style('display', 'none')\r\n        .style('opacity', 0)\r\n        .style('font-size', '14px')\r\n        .style('color', 'black');\r\n\r\n      const tooltipMouseover = (event, d) => {\r\n        tooltip.transition()\r\n          .duration(100)\r\n          .delay(200)\r\n          .style('opacity', 0.9)\r\n          .style('display', 'block');\r\n        // format values\r\n        const revenue = formatDollar(d.avgRevenue);\r\n        const budget = formatDollar(d.avgBudget);\r\n        const profit = d3.format('.1f')(d.profit / d.avgRevenue * 100);\r\n        tooltip.html(`<b>${d._id}</b> (${d.count} movies):<br />${revenue} revenue<br />${budget} budget<br />~ ${profit}% profit margin`)\r\n          .style('left', (event.pageX - 70) + 'px')\r\n          .style('top', () => { let pos = event.pageY < 800 ? 30 : -120; return (event.pageY + pos) + 'px' });\r\n      }\r\n\r\n      const tooltipMouseout = (event, d) => {\r\n        tooltip\r\n          .style('opacity', 0)\r\n          .style('display', 'none');\r\n      }\r\n\r\n      // color change\r\n      const categories = [...new Set(data.map(d => d.category))];\r\n\r\n      const colorChange = (d, col) => {\r\n        categories.forEach(cat => {\r\n          if (cat !== d.category) {\r\n            const c = col ? col : color(cat);\r\n            d3.selectAll(\".dot.\" + cat)\r\n              .transition()\r\n              .duration(100)\r\n              .attr(\"fill\", c);\r\n          }\r\n        });\r\n      }\r\n\r\n      // grid background\r\n      let grid = g => g\r\n        .attr(\"stroke\", \"currentColor\")\r\n        .attr(\"stroke-opacity\", 0.1)\r\n        .call(g => g.append(\"g\")\r\n          .attr(\"class\", \"grid\")\r\n          .selectAll(\"line\")\r\n          .data(x.ticks())\r\n          .join(\"line\")\r\n          .attr(\"x1\", d => 0.5 + x(d))\r\n          .attr(\"x2\", d => 0.5 + x(d))\r\n          .attr(\"y1\", margin.top)\r\n          .attr(\"y2\", height - margin.bottom))\r\n        .call(g => g.append(\"g\")\r\n          .selectAll(\"line\")\r\n          .data(y.ticks())\r\n          .join(\"line\")\r\n          .attr(\"y1\", d => 0.5 + y(d))\r\n          .attr(\"y2\", d => 0.5 + y(d))\r\n          .attr(\"x1\", margin.left)\r\n          .attr(\"x2\", width - margin.right));\r\n\r\n      svg.append(\"g\")\r\n        .attr(\"class\", \"x-axis\")\r\n        .call(xAxis);\r\n\r\n      svg.append(\"g\")\r\n        .attr(\"class\", \"y-axis\")\r\n        .call(yAxis);\r\n\r\n      svg.append(\"g\")\r\n        .call(grid);\r\n\r\n      const chart = svg.append(\"g\")\r\n        .attr(\"class\", \"dots\")\r\n        .attr(\"stroke-width\", 1.5)\r\n        .attr(\"font-family\", \"sans-serif\")\r\n        .attr(\"font-size\", 10)\r\n        .selectAll(\"path\")\r\n        .data(data)\r\n        .join(\"path\")\r\n        .attr(\"opacity\", 0)\r\n        .attr(\"transform\", d => `translate(${x(d.avgBudget)},${y(d.avgRevenue)})`)\r\n        .attr(\"fill\", d => color(d.category))\r\n        .attr(\"d\", d => shape(d.category))\r\n        .attr(\"class\", d => `dot ${d.category}`)\r\n        // on mouseover event\r\n        .on('mouseover', (event, d) => {\r\n          d3.select(event.currentTarget)\r\n            .style('opacity', 0.5);\r\n          tooltipMouseover(event, d);\r\n          colorChange(d, '#032541');\r\n          setTimeout(() => {\r\n            tooltipMouseout(event, d);\r\n          }, 10000);\r\n        })\r\n        .on('mouseout', (event, d) => {\r\n          d3.select(event.currentTarget)\r\n            .style('opacity', 1);\r\n          tooltipMouseout(event, d);\r\n          colorChange(d);\r\n        });\r\n\r\n      // animation\r\n      chart.transition()\r\n        .attr(\"opacity\", 1)\r\n        .duration(100)\r\n        .delay((d, i) => i * 25);\r\n\r\n      // legend\r\n      svg.selectAll(\"legend\")\r\n        .data(categories)\r\n        .join(\"path\")\r\n        .attr(\"stroke-width\", 1.5)\r\n        .attr(\"font-family\", \"sans-serif\")\r\n        .attr(\"font-size\", 10)\r\n        .attr(\"fill\", d => color(d))\r\n        .attr(\"d\", d => shape(d))\r\n        .attr(\"transform\", (d, i) => `translate(${(width / 3) - 10 + i * 90}, 10)`)\r\n        .text(d => d);\r\n      // rename labels for other departments than acting for more clarity\r\n      const labels = [...categories];\r\n      if (labels.length === 3) {\r\n        labels[0] = 'only women';\r\n        labels[1] = 'only men';\r\n        labels[2] = 'mixed gender team';\r\n      }\r\n      svg.selectAll(\"legend\")\r\n        .data(labels)\r\n        .join(\"text\")\r\n        .attr(\"fill\", \"white\")\r\n        .attr(\"font-size\", \"12px\")\r\n        .attr(\"x\", (d, i) => (width / 3) + i * 90)\r\n        .attr(\"y\", 15)\r\n        .text(d => d);\r\n\r\n      /**\r\n       * Zoomable Bar Chart Base Code from https://observablehq.com/@d3/zoomable-bar-chart\r\n       */\r\n      function zoom(svg) {\r\n        const extent = [[margin.left, margin.top], [width, height]];\r\n\r\n        svg.call(d3.zoom()\r\n          .scaleExtent([1, 8])\r\n          .translateExtent(extent)\r\n          .extent(extent)\r\n          .on('zoom', zoomed));\r\n\r\n        function zoomed(event) {\r\n          x.range([margin.left, width - margin.right].map(d => event.transform.applyX(d)));\r\n          svg.selectAll('.dots path')\r\n            .attr(\"transform\", d => `translate(${x(d.avgBudget)},${y(d.avgRevenue)})`);\r\n          svg.selectAll('.x-axis').call(xAxis);\r\n          svg.selectAll(\".grid line\")\r\n            .attr(\"x1\", d => 0.5 + x(d))\r\n            .attr(\"x2\", d => 0.5 + x(d));\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  return (\r\n    <div id=\"profit-chart\" className=\"diagram\"></div>\r\n  );\r\n}\r\n\r\nexport default ScatterPlot;","import React, { useState, useEffect } from 'react';\r\nimport ScatterPlot from './ScatterPlot';\r\n\r\nfunction ProfitChart({ url }) {\r\n  const [data, setData] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    let urlString = '';\r\n    Object.keys(url).forEach(u => {\r\n      urlString += '&' + u + '=' + url[u];\r\n    });\r\n    fetch('/api/profit?size=55000' + urlString)\r\n      .then(res => res.json())\r\n      .then(setData)\r\n      .then(() => setLoading(false))\r\n      .catch(setError);\r\n  }, [url]);\r\n\r\n  if (error) {\r\n    return <pre>{JSON.stringify(error, null, 2)}</pre>;\r\n  }\r\n\r\n  return (\r\n    <section id=\"charts\">\r\n      {loading && <p>LOADING...</p>}\r\n      {!loading && <ScatterPlot data={data} />}\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default ProfitChart;","import { React, useState, useCallback } from 'react';\r\n\r\nfunction ProfitChartSidebar({ setUrl }) {\r\n  // constants\r\n  const DEFAULT_DATA = 'acting';\r\n\r\n  const depsOptions = {\r\n    acting: 'Lead actor',\r\n    directing: 'Director teams',\r\n    production: 'Production teams',\r\n    writing: 'Writer teams'\r\n  }\r\n\r\n  // hooks\r\n  const [dataset, setDataset] = useState(DEFAULT_DATA);\r\n\r\n  const isActive = i => {\r\n    if (dataset === i) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  const handleDatasetChange = useCallback(e => {\r\n    setDataset(e.target.id);\r\n    setUrl({ dataset: e.target.id });\r\n  }, [setUrl, setDataset]);\r\n\r\n  return (\r\n    <div className=\"sticky-top pt-3\">\r\n      <h3>Select data grouping:</h3>\r\n      {Object.keys(depsOptions).map(i => (\r\n        <button className={'timespan' + (isActive(i) ? ' active' : '')} key={i} id={i}\r\n          onClick={handleDatasetChange}>{depsOptions[i]}</button>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProfitChartSidebar;","import { React, useState } from 'react';\r\nimport Infobox from '../../common/Infobox';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nfunction ProfitChartInfo({ url }) {\r\n  const [show, setShow] = useState(false);\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  let data;\r\n  switch (url.dataset) {\r\n    case 'acting':\r\n      data = 'lead actors';\r\n      break;\r\n    case 'directing':\r\n      data = 'director teams';\r\n      break;\r\n    case 'writing':\r\n      data = 'writer teams';\r\n      break;\r\n    case 'production':\r\n      data = 'production teams';\r\n      break;\r\n    default:\r\n      data = url.dataset;\r\n  }\r\n\r\n  const text = <>This chart shows the average budget and revenue <strong>(adjusted for inflation)</strong> of movies from 1913 - 2021 grouped by the <strong>\r\n    {data}' gender</strong>. Each shape represents one genre and you can hover over them for more information. <Button\r\n      variant=\"info\" onClick={handleShow}>Click here to read more.</Button></>;\r\n\r\n  return (\r\n    <>\r\n      <h2 className=\"text-center mb-0\">Average budget and revenue of movie genres grouped by {data}' gender</h2>\r\n      <p className=\"text-center\">Double click or use your mousewheel to zoom in</p>\r\n      <Infobox text={text} />\r\n\r\n      {/* MODAL */}\r\n      <Modal show={show} onHide={handleClose}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title><h2 className=\"mb-0\">How this chart was made</h2></Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <p>This chart is based on data of movies from many different countries which were taken from the TMDb.org database.</p>\r\n          <p>The movies were grouped into <strong>movie genres</strong> and the <strong>gender</strong> of the {data}. Movies without genres, budget and revenue data were excluded.</p>\r\n          <p>Movies with multiple genres were counted once for each of their genres.</p>\r\n          <p>The numbers are <strong>adjusted for inflation</strong> by taking the CPI (Consumer Price Index) of their release date and the mean value was calculated.</p>\r\n          <p>For the dataset with lead actors, the first actor listed in the credits was assumed to be the lead actor and selected to analyze.</p>\r\n          <p>For the dataset with other departments, the data was grouped by teams with \"only women\", \"only men\" and \"mixed gender\" (women and men).</p>\r\n          <p>Unfortunately there was not enough data for non-binary people to show in this chart.</p>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"primary\" onClick={handleClose}>\r\n            Close\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ProfitChartInfo;","import { React, useState } from 'react';\r\nimport {\r\n  BrowserRouter as Router,\r\n  Route\r\n} from 'react-router-dom';\r\n\r\nimport TimeChart from './timechart/TimeChart';\r\nimport TimeChartSidebar from './timechart/Sidebar';\r\nimport TimeChartInfo from './timechart/Info';\r\n\r\nimport GenresDeparmentsChart from './genresdepartmentschart/GenresDepartmentsChart';\r\nimport GenresDepartmentsInfo from './genresdepartmentschart/Info';\r\nimport GenresDepartmentsSidebar from './genresdepartmentschart/Sidebar';\r\n\r\nimport ProfitChart from './profitchart/ProfitChart';\r\nimport ProfitChartSidebar from './profitchart/Sidebar';\r\nimport ProfitChartInfo from './profitchart/Info';\r\n\r\nfunction ChartsLayout() {\r\n  const [timeUrl, setTimeUrl] = useState({\r\n    start: 1920,\r\n    end: 2020,\r\n    genre: 'all',\r\n    dep: 'all',\r\n    category: 'none'\r\n  });\r\n\r\n  const [gdUrl, setGdUrl] = useState({\r\n    dataset: 'crew',\r\n    time: 2010\r\n  });\r\n\r\n  const [profitUrl, setProfitUrl] = useState({\r\n    dataset: 'acting'\r\n  });\r\n\r\n  return (\r\n    <main className=\"row\">\r\n      <div className=\"col\">\r\n        <section id=\"sidebar\">\r\n          <h2>Filters</h2>\r\n          <Router>\r\n            <Route path=\"/time\" render={() => <TimeChartSidebar setUrl={setTimeUrl} />} />\r\n            <Route path=\"/genres\" render={() => <GenresDepartmentsSidebar setUrl={setGdUrl} />} />\r\n            <Route path=\"/profit\" render={() => <ProfitChartSidebar setUrl={setProfitUrl} />} />\r\n          </Router>\r\n        </section>\r\n      </div>\r\n\r\n      <div className=\"col-12 col-lg-9 order-lg-first\">\r\n        <section id=\"charts\">\r\n          <Router>\r\n            <Route path=\"/time\" render={() => <TimeChartInfo url={timeUrl} />} />\r\n            <Route path=\"/genres\" render={() => <GenresDepartmentsInfo url={gdUrl} />} />\r\n            <Route path=\"/profit\" render={() => <ProfitChartInfo url={profitUrl} />} />\r\n          </Router>\r\n\r\n          <Router>\r\n            <Route path=\"/time\" render={() => <TimeChart url={timeUrl} />} />\r\n            <Route path=\"/genres\" render={() => <GenresDeparmentsChart url={gdUrl} />} />\r\n            <Route path=\"/profit\" render={() => <ProfitChart url={profitUrl} />} />\r\n          </Router>\r\n        </section>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default ChartsLayout;","import React from 'react';\r\nimport {\r\n  BrowserRouter as Router,\r\n  Route\r\n} from 'react-router-dom';\r\nimport Header from './components/common/Header';\r\nimport Footer from './components/common/Footer';\r\nimport Home from './components/Home';\r\nimport ChartsLayout from './components/charts/ChartsLayout';\r\nimport './App.css';\r\n\r\nfunction App() {\r\n  return (\r\n    <Router>\r\n      <div className=\"App\">\r\n        <Header />\r\n        <Route path=\"/\" component={Home} exact />\r\n        <Route path=\"/time\" component={ChartsLayout} />\r\n        <Route path=\"/genres\" component={ChartsLayout} />\r\n        <Route path=\"/profit\" component={ChartsLayout} />\r\n        <Footer />\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}