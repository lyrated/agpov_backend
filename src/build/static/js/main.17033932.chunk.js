(this.webpackJsonpdatavisualization=this.webpackJsonpdatavisualization||[]).push([[0],{206:function(t,e,n){},215:function(t,e,n){},216:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n(19),c=n.n(r),i=(n(206),n(15)),s=n(6),o=n(0);var l=function(){return Object(o.jsxs)("header",{className:"row m-0",children:[Object(o.jsxs)("div",{className:"col-12 col-lg-6 p-0",children:[Object(o.jsx)("a",{href:"/",children:Object(o.jsx)("h1",{children:"A gendered point of view"})}),Object(o.jsx)("p",{className:"subtitle",children:"Visualizing gender distribution in the movie industry"})]}),Object(o.jsx)("div",{className:"col p-0",children:Object(o.jsx)("nav",{className:"navbar navbar-expand-md px-0",children:Object(o.jsxs)("ul",{className:"navbar-nav ml-0 ml-md-auto",children:[Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsx)(i.b,{exact:!0,to:"/",activeClassName:"active",className:"nav-link",children:"Home"})}),Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsx)(i.b,{to:"/time",activeClassName:"active",className:"nav-link",children:"Distribution over time"})}),Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsx)(i.b,{to:"/genres",activeClassName:"active",className:"nav-link",children:"Genres & Departments"})}),Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsx)(i.b,{to:"/profit",activeClassName:"active",className:"nav-link",children:"Budget & Revenue"})})]})})})]})};var d=function(){return Object(o.jsx)("footer",{children:Object(o.jsxs)("p",{children:["Copyright \xa9 2021 M. L. Nguyen. ",Object(o.jsxs)("em",{children:["This web app is part of my bachelor's thesis at HTW Berlin. The data was provided by ",Object(o.jsx)("a",{href:"https://tmdb.org/",target:"_blank",rel:"noopener noreferrer",children:"TMDb.org"})," (data retrieved on April 12th, 2021)."]})]})})},u=n.p+"static/media/img_home01.6bd30acd.jpg";var h=function(){return Object(o.jsxs)("div",{className:"row py-3",children:[Object(o.jsx)("div",{className:"col-12 col-xl-6",children:Object(o.jsxs)("section",{id:"home",children:[Object(o.jsx)("p",{children:"Welcome to my final thesis project! I hope you will like it here :)"}),Object(o.jsxs)("p",{children:["My topic for the thesis is ",Object(o.jsx)("strong",{children:"data visualization"}),". I chose the database ",Object(o.jsx)("a",{href:"https://tmdb.org/",target:"_blank",rel:"noopener noreferrer",children:"TMDb.org"})," with over 554K movies listed to make charts about the ",Object(o.jsx)("strong",{children:"gender distribution"})," in the movie industry with the help of the D3.js library. Precisely, I want to find out:"]}),Object(o.jsxs)("ul",{children:[Object(o.jsx)("li",{children:Object(o.jsx)("em",{children:"How has the share of women changed over the years?"})}),Object(o.jsx)("li",{children:Object(o.jsx)("em",{children:"How many women work in each department and movie genre?"})}),Object(o.jsx)("li",{children:Object(o.jsx)("em",{children:"How much money is involved when women work on movies?"})})]}),Object(o.jsx)("div",{className:"pb-3 text-center",children:Object(o.jsx)("a",{href:"/time",className:"btn btn-primary px-3",role:"button",children:"Go to the first chart"})}),Object(o.jsxs)("p",{children:["If you find any technical errors, please contact me with screenshots included! You can reach me via ",Object(o.jsx)("a",{href:"mailto:Mai-Ly.Nguyen@Student.HTW-Berlin.de",target:"_blank",rel:"noopener noreferrer",children:"e-mail"})," or on Discord at ",Object(o.jsx)("strong",{children:"miyla#1024"}),"."]}),Object(o.jsxs)("p",{className:"text-right text-info",children:["- ",Object(o.jsx)("em",{children:"Ly"})]}),Object(o.jsxs)("p",{className:"small pb-0",children:[Object(o.jsx)("em",{children:"Disclaimer:"})," In this project I only analyze people identified as female or male, but this does not mean that I want to push the agenda that there are only two genders. Unfortunately, there was not enough data to mention other genders in the charts."]})]})}),Object(o.jsxs)("div",{className:"col-12 col-xl-6 text-center my-auto",children:[Object(o.jsx)("img",{src:u,alt:"Photograph of a cinema with pink neon lights",className:"img-fluid rounded-lg"}),Object(o.jsxs)("p",{className:"small text-muted mb-0",children:["Photo by ",Object(o.jsx)("a",{href:"https://unsplash.com/@myke_simon",target:"_blank",rel:"noopener noreferrer",children:"Myke Simon"})," on Unsplash"]})]})]})},j=n(3),p=n(2);var f=function(t){var e=t.data;return Object(a.useEffect)((function(){if(null!==e&&!e.data){var t={top:30,right:30,bottom:30,left:50},n=450-t.top-t.bottom,a=900-t.right-t.left,r=p.l().domain(e.map((function(t){return t.x}))).range([0,a]).padding(.1),c=p.m().domain([0,50]).rangeRound([0,n]),i=p.m().domain([0,50]).rangeRound([n,0]),s=p.m().domain([0,p.i(e,(function(t){return t.y}))]).range(["#01B4E4","#D40242"]),o=function(e){return e.attr("transform","translate(".concat(t.left,",").concat(n+t.top,")")).call(p.b(r).tickValues(r.domain().filter((function(t,e){return!(e%5)}))))},l=p.o("body").append("div").style("position","absolute").style("padding","0 10px").style("background","#F0F0FA").style("display","none").style("opacity",0).style("font-size","14px").style("color","black"),d=p.o("#time-chart").append("svg").attr("viewBox",[0,0,a+t.right+t.left,n+t.top+t.bottom+10]).call((function(c){var i=[[t.left,t.top],[a,n]],s=Math.max(Math.ceil(e.length/10),2);c.call(p.t().scaleExtent([1,s]).translateExtent(i).extent(i).on("zoom",(function(t){r.range([0,a].map((function(e){return t.transform.applyX(e)}))),c.selectAll(".bars rect").attr("x",(function(t){return r(t.x)})).attr("width",r.bandwidth()),c.selectAll(".x-axis").call(o)})))})),u=d.append("g").attr("transform","translate(".concat(t.left,", ").concat(t.top,")")).attr("class","bars").selectAll("rect").data(e).join("rect").attr("fill",(function(t){return s(t.y)})).attr("x",(function(t,e){return r(t.x)})).attr("y",(function(t){return n})).attr("width",r.bandwidth()).attr("height",0).on("mouseover",(function(t,e){p.o(t.currentTarget).style("opacity",.9),l.transition().duration(100).delay(500).style("opacity",.9).style("display","block"),l.html(e.x+": "+e.y+"%").style("left",t.pageX+10+"px").style("top",t.pageY-20+"px"),setTimeout((function(){l.style("opacity",0).style("display","none")}),5e3)})).on("mouseout",(function(t,e){p.o(t.currentTarget).style("opacity",1),l.style("opacity",0).style("display","none")}));d.append("g").attr("class","x-axis").call(o),d.append("text").attr("x",a/2+t.left).attr("y",n+t.top+t.bottom+5).attr("fill","#FDC170").style("font-size","10pt").style("text-anchor","middle").text("years"),d.append("g").attr("class","y-axis").call((function(e){return e.attr("transform","translate(".concat(t.left,",").concat(t.top,")")).call(p.c(i).ticks(null,"s").tickFormat((function(t){return t+"%"})))})),d.append("text").attr("x",0).attr("y",15).attr("fill","#FDC170").style("font-size","10pt").text("% of women from all credits");var h=d.append("linearGradient").attr("id","bg-gradient");h.append("stop").attr("stop-color","#01B4E4").attr("offset","0%"),h.append("stop").attr("stop-color","#D40242").attr("offset","100%"),d.append("text").attr("x",a/4*3).attr("y",30).attr("fill","white").style("font-size","12px").text("0%"),d.append("rect").attr("x",a/4*3+30).attr("y",20).attr("width",200).attr("height",10).style("fill","url(#bg-gradient)"),d.append("text").attr("x",a/4*3+240).attr("y",30).attr("fill","white").style("font-size","12px").text(p.i(e,(function(t){return t.y}))+"%"),u.transition().attr("height",(function(t){return c(t.y)})).attr("y",(function(t,e){return n-c(t.y)})).duration(50).delay((function(t,e){return 5*e})),0===e.length&&d.append("text").attr("x",a/2+t.right).attr("y",n/2+t.top).attr("text-anchor","middle").attr("fill","white").style("font-size","16px").text("This result contains no data. Please change your filters.")}})),Object(o.jsx)("div",{id:"time-chart",className:"diagram"})};var b=function(t){return Object(a.useEffect)((function(){if(null!==t.data&&t.data.data){var e=t.data.data,n=t.data.columns,a={top:30,right:30,bottom:30,left:50},r=450-a.top-a.bottom,c=900-a.right-a.left,i=p.q().keys(n.slice(1))(e).map((function(t){return t.forEach((function(e){return e.key=t.key})),t})),s=p.l().domain(e.map((function(t){return t.name}))).range([0,c]).padding(.1),o=p.m().domain([0,50]).rangeRound([r,0]),l=p.n().domain(i.map((function(t){return t.key}))).range(["#999999","#A42147","#2D847B","#F3A712","#FDAAA0","#DE3F4C","#66A0ED","#42C3A8","#F9CD44","#EA7073","#57A3C7","#9381FF","#0EE0D2","#FFF275","#CC3E55","#B96481","#08627C","#FCD491","#70FF8D","#6652D4"]).unknown("#ccc"),d=function(t){return t.attr("transform","translate(".concat(a.left,",").concat(r+a.top,")")).call(p.b(s).tickValues(s.domain().filter((function(t,e){return!(e%5)}))))},u=p.o("body").append("div").style("position","absolute").style("padding","0 10px").style("background","#F0F0FA").style("display","block").style("opacity",0).style("font-size","14px").style("color","black"),h=p.o("#time-chart").append("svg").attr("viewBox",[0,0,c+a.right+a.left,r+a.top+a.bottom+10]).call((function(t){var n=[[a.left,a.top],[c,r]],i=Math.max(Math.ceil(e.length/10),2);t.call(p.t().scaleExtent([1,i]).translateExtent(n).extent(n).on("zoom",(function(e){s.range([0,c].map((function(t){return e.transform.applyX(t)}))),t.selectAll(".bars rect").attr("x",(function(t){return s(t.data.name)})).attr("width",s.bandwidth()),t.selectAll(".x-axis").call(d)})))}));h.append("g").attr("transform","translate(".concat(a.left,", ").concat(a.top,")")).attr("class","bars").selectAll("g").data(i).join("g").attr("fill",(function(t){return l(t.key)})).selectAll("rect").data((function(t){return t})).join("rect").attr("x",(function(t,e){return s(t.data.name)})).attr("y",r).attr("height",0).attr("width",s.bandwidth()).on("mouseover",(function(t,e){p.o(t.currentTarget).style("opacity",.9),u.transition().duration(100).style("opacity",.9).style("display","block"),u.html("".concat(e.data.name,": ").concat(e.key," - ").concat(function(t){return isNaN(t)?"N/A":t.toLocaleString("en")}(e.data[e.key]),"%")).style("left",t.pageX+10+"px").style("top",t.pageY-20+"px"),setTimeout((function(){u.style("opacity",0).style("display","none")}),5e3)})).on("mouseout",(function(t,e){p.o(t.currentTarget).style("opacity",1),u.style("opacity",0).style("display","none")})).transition().attr("height",(function(t){return o(t[0])-o(t[1])})).attr("y",(function(t){return o(t[1])})).duration(50).delay((function(t,e){return 5*e})),h.append("g").attr("class","x-axis").call(d),h.append("text").attr("x",c/2).attr("y",r+a.top+a.bottom+5).attr("fill","#FDC170").style("font-size","10pt").style("text-anchor","middle").text("years"),h.append("g").attr("class","y-axis").call((function(t){return t.attr("transform","translate(".concat(a.left,",").concat(a.top,")")).call(p.c(o).ticks(null,"s").tickFormat((function(t){return t+"%"})))})),h.append("text").attr("x",0).attr("y",15).attr("fill","#FDC170").style("font-size","10pt").text("% of women from all credits");var j=n.slice(1,Math.round(n.length/3)+1);h.selectAll("legend").data(j).enter().append("rect").attr("fill",(function(t){return l(t)})).attr("width",10).attr("height",10).attr("x",c/5*3).attr("y",(function(t,e){return 20*e+10}));var f=j.indexOf("Actors");-1!==f&&(j[f]="Background Acting"),h.selectAll("labels").data(j).enter().append("text").attr("fill","white").attr("x",c/5*3+15).attr("y",(function(t,e){return 20*e+20})).style("font-size","12px").text((function(t){return t}));var b=n.slice(Math.round(n.length/3)+1,2*Math.round(n.length/3)+1);h.selectAll("legend").data(b).enter().append("rect").attr("fill",(function(t){return l(t)})).attr("width",10).attr("height",10).attr("x",c/5*3+125).attr("y",(function(t,e){return 20*e+10}));var m=b.indexOf("Costume & Make-Up");-1!==m&&(b[m]="Costume/Make-Up"),h.selectAll("labels").data(b).enter().append("text").attr("fill","white").attr("x",c/5*3+15+125).attr("y",(function(t,e){return 20*e+20})).style("font-size","12px").text((function(t){return t}));var x=n.slice(2*Math.round(n.length/3)+1);h.selectAll("legend").data(x).enter().append("rect").attr("fill",(function(t){return l(t)})).attr("width",10).attr("height",10).attr("x",c/5*3+250).attr("y",(function(t,e){return 20*e+10})),h.selectAll("labels").data(x).enter().append("text").attr("fill","white").attr("width",100).attr("x",c/5*3+15+250).attr("y",(function(t,e){return 20*e+20})).style("font-size","12px").text((function(t){return t}))}})),Object(o.jsx)("div",{id:"time-chart",className:"diagram"})};var m=function(t){var e=t.url,n=Object(a.useState)(null),r=Object(j.a)(n,2),c=r[0],i=r[1],s=Object(a.useState)(!1),l=Object(j.a)(s,2),d=l[0],u=l[1],h=Object(a.useState)(null),p=Object(j.a)(h,2),m=p[0],x=p[1];return Object(a.useEffect)((function(){u(!0);var t="";Object.keys(e).forEach((function(n){t+="&"+n+"="+e[n]})),fetch("http://localhost:9000/api/time?size=1000&"+t).then((function(t){return t.json()})).then(i).then((function(){return u(!1)})).catch(x)}),[e]),m?Object(o.jsx)("pre",{children:JSON.stringify(m,null,2)}):"none"===e.category?Object(o.jsxs)(o.Fragment,{children:[d&&Object(o.jsx)("p",{children:"LOADING..."}),!d&&Object(o.jsx)(f,{data:c})]}):Object(o.jsxs)(o.Fragment,{children:[d&&Object(o.jsx)("p",{children:"LOADING..."}),!d&&Object(o.jsx)(b,{data:c})]})};var x=function(t){for(var e=t.setUrl,n={all:"All",action:"Action",adventure:"Adventure",animation:"Animation",comedy:"Comedy",crime:"Crime",documentary:"Documentary",drama:"Drama",family:"Family",fantasy:"Fantasy",history:"History",horror:"Horror",music:"Music",mystery:"Mystery",romance:"Romance",sciencefiction:"Science Fiction",tvmovie:"TV Movie",thriller:"Thriller",war:"War",western:"Western"},r=Object(a.useState)(1920),c=Object(j.a)(r,2),i=c[0],s=c[1],l=Object(a.useState)(2020),d=Object(j.a)(l,2),u=d[0],h=d[1],p=Object(a.useState)("all"),f=Object(j.a)(p,2),b=f[0],m=f[1],x=Object(a.useState)("all"),g=Object(j.a)(x,2),y=g[0],O=g[1],v=Object(a.useState)("none"),w=Object(j.a)(v,2),k=w[0],N=w[1],A=Object(a.useState)("none"),C=Object(j.a)(A,2),F=C[0],D=C[1],M=Object(a.useCallback)((function(t){e({start:i,end:u,genre:b,dep:y,category:k})}),[e,i,u,b,y,k]),S=[],T=1920;T<=2020;T+=10)S.push(Object(o.jsx)("option",{children:T},T));for(var z=[],E=0,B=Object.keys(n);E<B.length;E++){var I=B[E];z.push(Object(o.jsx)("option",{value:I,children:n[I]},I))}return Object(o.jsxs)("div",{class:"sticky-top pt-3",children:[Object(o.jsxs)("div",{className:"pb-2",children:[Object(o.jsx)("h3",{children:"Select years:"}),Object(o.jsx)("label",{className:"mb-0",children:"Start"}),Object(o.jsx)("select",{className:"custom-select",name:"start",defaultValue:i,onChange:function(t){return s(t.target.value)},children:S}),Object(o.jsx)("label",{className:"mt-2 mb-0",children:"End"}),Object(o.jsx)("select",{className:"custom-select",name:"end",defaultValue:u,onChange:function(t){return h(t.target.value)},children:S})]}),Object(o.jsxs)("div",{className:"py-2",children:[Object(o.jsx)("h3",{children:"Select genre:"}),Object(o.jsx)("select",{className:"custom-select",name:"genre",defaultValue:"all",onChange:function(t){m(t.target.value),"all"!==t.target.value&&(D("none"),N("none"))},children:z})]}),Object(o.jsxs)("div",{className:"py-2",children:[Object(o.jsx)("h3",{children:"Select department:"}),Object(o.jsxs)("select",{className:"custom-select",name:"dep",defaultValue:"all",onChange:function(t){O(t.target.value),"all"!==t.target.value&&(D("none"),N("none"))},children:[Object(o.jsx)("option",{value:"all",children:"All"}),Object(o.jsx)("option",{value:"acting",children:"Acting"}),Object(o.jsx)("option",{value:"writing",children:"Writing"}),Object(o.jsx)("option",{value:"production",children:"Production"}),Object(o.jsx)("option",{value:"directing",children:"Directing"})]})]}),Object(o.jsxs)("div",{className:"pt-2",children:[Object(o.jsx)("h3",{children:"Divide into categories:"}),Object(o.jsxs)("select",{className:"custom-select",value:F,name:"cat",onChange:function(t){N(t.target.value),D(t.target.value)},children:[Object(o.jsx)("option",{value:"none",children:"None"}),Object(o.jsx)("option",{value:"genres",disabled:"all"!==b||"all"!==y,children:"Genres"}),Object(o.jsx)("option",{value:"departments",disabled:"all"!==b||"all"!==y,children:"Departments"})]}),Object(o.jsx)("p",{className:"small",children:"Category can only be selected if 'All' is selected in above filters."})]}),Object(o.jsx)("button",{className:"btn btn-primary w-100",onClick:M,children:"Apply filters"})]})};var g=function(t){var e=t.text;return Object(o.jsxs)("div",{className:"row infobox m-3",children:[Object(o.jsx)("div",{className:"col-auto my-auto text-center text-info",children:Object(o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",fill:"currentColor",className:"bi bi-info-circle-fill",viewBox:"0 0 16 16",children:Object(o.jsx)("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"})})}),Object(o.jsx)("div",{className:"col",children:Object(o.jsx)("p",{className:"mb-0",children:e})})]})},y=n(9),O=n(18);var v=function(t){var e=t.url,n="all"===e.genre?"movies of all genres":e.genre+" movies",r="all"===e.dep?"all departments":e.dep,c="";"none"!==e.category&&(c="The bars are divided into sections which show how many participated in which ".concat(e.category,"."),c+=" Hover over each section to get more information.");var i=Object(a.useState)(!1),s=Object(j.a)(i,2),l=s[0],d=s[1],u=function(){return d(!1)},h=Object(o.jsxs)(o.Fragment,{children:["This chart shows the percentages of women who worked in ",Object(o.jsx)("strong",{children:r})," and ",Object(o.jsx)("strong",{children:n})," during the years ",Object(o.jsxs)("strong",{children:[e.start," to ",e.end]})," according to the movie credits. ",c," ",Object(o.jsx)(O.a,{variant:"info",onClick:function(){return d(!0)},children:"Click here to read more."})]});return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("h2",{className:"text-center mb-0",children:["Women's participation in ",n," over the years ",e.start," - ",e.end]}),Object(o.jsx)("p",{className:"text-center",children:"Double click or use your mousewheel to zoom in"}),Object(o.jsx)(g,{text:h}),Object(o.jsxs)(y.a,{show:l,onHide:u,children:[Object(o.jsx)(y.a.Header,{closeButton:!0,children:Object(o.jsx)(y.a.Title,{children:Object(o.jsx)("h2",{className:"mb-0",children:"How this chart was made"})})}),Object(o.jsxs)(y.a.Body,{children:[Object(o.jsx)("p",{children:"This chart is based on credits of movies from many different countries which were taken from the TMDb.org database."}),Object(o.jsx)("p",{children:"Not all movies had the full cast and crew listed."}),Object(o.jsxs)("p",{children:["The movies were grouped into ",Object(o.jsx)("strong",{children:"years"})," according to their release date. The chart excluded movies without release date."]}),Object(o.jsxs)("p",{children:["It also ",Object(o.jsx)("u",{children:"only"})," considers people who were marked with the gender ",Object(o.jsx)("strong",{children:"female or male"}),"."]}),Object(o.jsx)("p",{children:"The numbers were calculated by counting all people listed as women, and dividing it by the sum of all female and male people."}),Object(o.jsxs)("p",{children:["Roughly ",Object(o.jsx)("strong",{children:"36%"})," of the credited people did not have any gender listed or were non-binary."]}),Object(o.jsx)("p",{children:"Unfortunately, non-binary people could not be included in this analysis as there was not enough data."})]}),Object(o.jsx)(y.a.Footer,{children:Object(o.jsx)(O.a,{variant:"primary",onClick:u,children:"Close"})})]})]})};var w=function(t){var e=t.data;return Object(a.useEffect)((function(){if(null!=e){var t=function(t,e){e.depth>0?(g.style("cursor","pointer").text("".concat(e.parent.data.name," > ").concat(e.data.name)),y.transition().duration(750).style("cursor","pointer").attr("fill","white")):(g.text("Genres").style("cursor","default"),y.transition().duration(750).style("cursor","default").attr("fill","transparent")),x.datum(e.parent||u),g.datum(e.parent||u),y.datum(e.parent||u),u.each((function(t){return t.target={x0:2*Math.max(0,Math.min(1,(t.x0-e.x0)/(e.x1-e.x0)))*Math.PI,x1:2*Math.max(0,Math.min(1,(t.x1-e.x0)/(e.x1-e.x0)))*Math.PI,y0:Math.max(0,t.y0-e.depth),y1:Math.max(0,t.y1-e.depth)}}));var c=f.transition().duration(750);b.transition(c).tween("data",(function(t){var e=p.g(t.current,t.target);return function(n){return t.current=e(n)}})).filter((function(t){return+this.getAttribute("fill-opacity")||n(t.target)})).attr("fill-opacity",(function(t){return n(t.target)?.75:0})).attrTween("d",(function(t){return function(){return s(t.current)}})),m.filter((function(t){return+this.getAttribute("fill-opacity")||a(t.target)})).transition(c).attr("fill-opacity",(function(t){return+a(t.target)})).attrTween("transform",(function(t){return function(){return r(t.current)}}))},n=function(t){return t.y1<=3&&t.y0>=1&&t.x1>t.x0},a=function(t){return t.y1<=3&&t.y0>=1&&(t.y1-t.y0)*(t.x1-t.x0)>.03},r=function(t){var e=(t.x0+t.x1)/2*180/Math.PI,n=(t.y0+t.y1)/2*i;return"rotate(".concat(e-90,") translate(").concat(n,",0) rotate(").concat(e<180?0:180,")")},c=650,i=c/6,s=p.a().startAngle((function(t){return t.x0})).endAngle((function(t){return t.x1})).padAngle((function(t){return Math.min((t.x1-t.x0)/2,.005)})).padRadius(1.5*i).innerRadius((function(t){return t.y0*i})).outerRadius((function(t){return Math.max(t.y0*i,t.y1*i-1)})),o=p.n(p.k(p.h,e.children.length+1)),l=p.e(",d"),d=p.e(".1f"),u=function(t){var e=p.f(t).sum((function(t){return t.value})).sort((function(t,e){return e.value-t.value}));return p.j().size([2*Math.PI,e.height+1])(e)}(e);u.each((function(t){return t.current=t}));var h=p.o("body").append("div").style("position","absolute").style("padding","0.2rem 0.5rem").style("background","#F0F0FA").style("display","block").style("opacity",0).style("font-size","14px").style("color","black"),j=function(){h.style("opacity",0).style("display","none")},f=p.o("#genres-departments-chart").append("svg").attr("viewBox",[0,0,c,c]).style("font","10px sans-serif").append("g").attr("transform","translate(".concat(325,",").concat(325,")")),b=f.append("g").selectAll("path").data(u.descendants().slice(1)).join("path").attr("fill",(function(t){if(3===t.depth)return"Male"===t.data.name?"#FDC170":"Female"===t.data.name?"#D40242":"#9A999F";for(;t.depth>1;)t=t.parent;return o(t.data.name)})).attr("fill-opacity",(function(t){return n(t.current)?.75:0})).attr("d",(function(t){return s(t.current)})).on("mouseover",(function(t,e){n(e.current)&&(!function(t,e){h.transition().duration(100).delay(400).style("opacity",.9).style("display","block");var n=e.ancestors()[1].data.name.toLowerCase();n="genres"===n?"all "+n:n;var a=e.value/e.ancestors()[1].value*100;h.html('<p class="small text-muted mb-1">'.concat(e.ancestors().map((function(t){return t.data.name})).reverse().join(" > "),"</p>").concat(d(a),"% of ").concat(n,"<br />(").concat(l(e.value)," people)")).style("left",t.pageX+40+"px").style("top",t.pageY-10+"px")}(t,e),setTimeout(j,8e3))})).on("mouseout",(function(t,e){j()})).on("click",(function(t,e){j()}));b.filter((function(t){return t.children})).style("cursor","pointer").on("click",t);var m=f.append("g").attr("pointer-events","none").attr("text-anchor","middle").style("user-select","none").attr("fill","#D2D2DC").selectAll("text").data(u.descendants().slice(1)).join("text").attr("dy","0.35em").attr("fill-opacity",(function(t){return+a(t.current)})).attr("transform",(function(t){return r(t.current)})).text((function(t){return t.data.name})),x=f.append("circle").datum(u).attr("r",i).attr("fill","none").attr("pointer-events","all").on("click",t),g=f.append("text").datum(u).attr("pointer-events","all").style("cursor","default").style("font-size","10pt").attr("text-anchor","middle").attr("fill","white").attr("dy","0").text("Genres").on("click",t),y=f.append("text").datum(u).attr("pointer-events","all").style("cursor","default").style("font-size","8pt").attr("text-anchor","middle").attr("fill","transparent").attr("dy","10pt").text("Go back").on("click",t)}})),Object(o.jsx)("div",{id:"genres-departments-chart",className:"diagram"})};var k=function(t){var e=t.url,n=Object(a.useState)(null),r=Object(j.a)(n,2),c=r[0],i=r[1],s=Object(a.useState)(!1),l=Object(j.a)(s,2),d=l[0],u=l[1],h=Object(a.useState)(null),p=Object(j.a)(h,2),f=p[0],b=p[1];return Object(a.useEffect)((function(){u(!0);var t="";Object.keys(e).forEach((function(n){t+="&"+n+"="+e[n]})),fetch("http://localhost:9000/api/genres-departments?size=10000"+t).then((function(t){return t.json()})).then(i).then((function(){return u(!1)})).catch(b)}),[e]),f?Object(o.jsx)("pre",{children:JSON.stringify(f,null,2)}):Object(o.jsxs)("section",{id:"charts",children:[d&&Object(o.jsx)("p",{children:"LOADING..."}),!d&&Object(o.jsx)(w,{data:c})]})};var N=function(t){var e=t.url,n="all"===e.dataset?"":Object(o.jsx)("strong",{children:" (excluding acting)"}),r=Object(a.useState)(!1),c=Object(j.a)(r,2),i=c[0],s=c[1],l=function(){return s(!1)},d=Object(o.jsxs)(o.Fragment,{children:["This chart shows how many female and male people work in all movie genres and departments",n," during the years ",Object(o.jsxs)("strong",{children:[e.time," to ",e.time+9]})," according to the movie credits. ",Object(o.jsx)(O.a,{variant:"info",onClick:function(){return s(!0)},children:"Click here to read more."})]});return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("h2",{className:"text-center mb-1",children:["Gender distribution in genres and departments in the ",e.time,"s"]}),Object(o.jsx)("p",{className:"text-center",children:"Click on a section to zoom in or the center to zoom out"}),Object(o.jsx)(g,{text:d}),Object(o.jsxs)(y.a,{show:i,onHide:l,children:[Object(o.jsx)(y.a.Header,{closeButton:!0,children:Object(o.jsx)(y.a.Title,{children:Object(o.jsx)("h2",{className:"mb-0",children:"How this chart was made"})})}),Object(o.jsxs)(y.a.Body,{children:[Object(o.jsx)("p",{children:"This chart is based on credits of movies from many different countries which were taken from the TMDb.org database."}),Object(o.jsx)("p",{children:"Not all movies had the full cast and crew listed."}),Object(o.jsxs)("p",{children:["The people were grouped into ",Object(o.jsx)("strong",{children:"movie genres"}),", then their ",Object(o.jsx)("strong",{children:"department"})," and lastly the given ",Object(o.jsx)("strong",{children:"gender"}),". Movies without genres were excluded."]}),Object(o.jsx)("p",{children:"Movies with multiple genres were counted once for each of their genres."}),Object(o.jsx)("p",{children:"The numbers were calculated by counting all people listed as female, male or undefined/non-binary of each group."}),Object(o.jsx)("p",{children:"Non-binary people were grouped together with undefined gender, because the area would be too small to show up on the chart."})]}),Object(o.jsx)(y.a.Footer,{children:Object(o.jsx)(O.a,{variant:"primary",onClick:l,children:"Close"})})]})]})};var A=function(t){for(var e=t.setUrl,n="crew",r=Object(a.useState)(n),c=Object(j.a)(r,2),i=c[0],s=c[1],l=Object(a.useState)(2010),d=Object(j.a)(l,2),u=d[0],h=d[1],p=function(t){return+u===t},f=Object(a.useCallback)((function(t){h(t.target.id),e({dataset:i,time:t.target.id})}),[e,h,i]),b=Object(a.useCallback)((function(t){var a=t.target.checked?t.target.value:n;s(a),e({dataset:a,time:u})}),[e,s,u]),m=[],x=1920;x<2020;x+=10)m.push(x);return Object(o.jsxs)("div",{class:"sticky-top pt-3",children:[Object(o.jsx)("h3",{children:"Select data:"}),Object(o.jsxs)("div",{className:"form-check pb-4",children:[Object(o.jsx)("input",{type:"checkbox",id:"data",className:"form-check-input",value:"all",onChange:b}),Object(o.jsx)("label",{htmlFor:"data",className:"form-check-label",children:"include actors"})]}),Object(o.jsxs)("div",{className:"pb-2",children:[Object(o.jsx)("h3",{children:"Select time interval:"}),m.map((function(t){return Object(o.jsxs)("button",{className:"timespan"+(p(t)?" active":""),id:t,onClick:f,children:[t," - ",t+9]},t)}))]})]})},C=n(38);var F=function(t){var e=t.data;return Object(a.useEffect)((function(){if(null!=e){var t={top:30,right:30,bottom:40,left:40},n=600-t.top-t.bottom,a=850-t.right-t.left,r=p.e(".2s"),c=p.e("$,d"),i=p.o("#profit-chart").append("svg").attr("viewBox",[0,0,a,n]).call((function(e){var r=[[t.left,t.top],[a,n]];e.call(p.t().scaleExtent([1,8]).translateExtent(r).extent(r).on("zoom",(function(n){s.range([t.left,a-t.right].map((function(t){return n.transform.applyX(t)}))),e.selectAll(".dots path").attr("transform",(function(t){return"translate(".concat(s(t.avgBudget),",").concat(o(t.avgRevenue),")")})),e.selectAll(".x-axis").call(u),e.selectAll(".grid line").attr("x1",(function(t){return.5+s(t)})).attr("x2",(function(t){return.5+s(t)}))})))})),s=p.m().domain(p.d(e,(function(t){return t.avgBudget}))).nice().range([t.left,a-t.right]),o=p.m().domain(p.d(e,(function(t){return t.avgRevenue}))).nice().range([n-t.bottom,t.top]),l=p.n().domain(e.map((function(t){return t.category}))).range(["#D93B63","#01C6AC","#01B4E4"]),d=p.n(e.map((function(t){return t.category})),p.s.map((function(t){return p.r().size(80).type(t)()}))),u=function(e){return e.attr("transform","translate(0,".concat(n-t.bottom,")")).call(p.b(s).ticks(a/80).tickFormat(r)).call((function(t){return t.select(".domain").remove()})).call((function(e){return e.append("text").attr("x",a).attr("y",t.bottom-4).attr("fill","#FDC170").attr("text-anchor","end").text("Average budget in million constant USD")}))},h=p.o("body").append("div").style("position","absolute").style("padding","0.2rem 0.5rem").style("background","#F0F0FA").style("display","none").style("opacity",0).style("font-size","14px").style("color","black"),j=function(t,e){h.style("opacity",0).style("display","none")},f=Object(C.a)(new Set(e.map((function(t){return t.category})))),b=function(t,e){f.forEach((function(n){if(n!==t.category){var a=e||l(n);p.p(".dot."+n).transition().duration(100).attr("fill",a)}}))};i.append("g").attr("class","x-axis").call(u),i.append("g").attr("class","y-axis").call((function(e){return e.attr("transform","translate(".concat(t.left,",0)")).call(p.c(o).tickFormat(r)).call((function(t){return t.select(".domain").remove()})).call((function(e){return e.append("text").attr("x",-t.left).attr("y",10).attr("fill","#FDC170").attr("text-anchor","start").text("Average revenue in million constant USD")}))})),i.append("g").call((function(e){return e.attr("stroke","currentColor").attr("stroke-opacity",.1).call((function(e){return e.append("g").attr("class","grid").selectAll("line").data(s.ticks()).join("line").attr("x1",(function(t){return.5+s(t)})).attr("x2",(function(t){return.5+s(t)})).attr("y1",t.top).attr("y2",n-t.bottom)})).call((function(e){return e.append("g").selectAll("line").data(o.ticks()).join("line").attr("y1",(function(t){return.5+o(t)})).attr("y2",(function(t){return.5+o(t)})).attr("x1",t.left).attr("x2",a-t.right)}))})),i.append("g").attr("class","dots").attr("stroke-width",1.5).attr("font-family","sans-serif").attr("font-size",10).selectAll("path").data(e).join("path").attr("opacity",0).attr("transform",(function(t){return"translate(".concat(s(t.avgBudget),",").concat(o(t.avgRevenue),")")})).attr("fill",(function(t){return l(t.category)})).attr("d",(function(t){return d(t.category)})).attr("class",(function(t){return"dot ".concat(t.category)})).on("mouseover",(function(t,e){p.o(t.currentTarget).style("opacity",.5),function(t,e){h.transition().duration(100).delay(200).style("opacity",.9).style("display","block");var n=c(e.avgRevenue),a=c(e.avgBudget),r=p.e(".1f")(e.profit/e.avgRevenue*100);h.html("<b>".concat(e._id,"</b> (").concat(e.count," movies):<br />").concat(n," revenue<br />").concat(a," budget<br />~ ").concat(r,"% profit margin")).style("left",t.pageX-70+"px").style("top",(function(){var e=t.pageY<800?30:-120;return t.pageY+e+"px"}))}(t,e),b(e,"#032541"),setTimeout((function(){j()}),1e4)})).on("mouseout",(function(t,e){p.o(t.currentTarget).style("opacity",1),j(),b(e)})).transition().attr("opacity",1).duration(100).delay((function(t,e){return 25*e})),i.selectAll("legend").data(f).join("path").attr("stroke-width",1.5).attr("font-family","sans-serif").attr("font-size",10).attr("fill",(function(t){return l(t)})).attr("d",(function(t){return d(t)})).attr("transform",(function(t,e){return"translate(".concat(a/3-10+90*e,", 10)")})).text((function(t){return t}));var m=Object(C.a)(f);3===m.length&&(m[0]="only women",m[1]="only men",m[2]="mixed genders"),i.selectAll("legend").data(m).join("text").attr("fill","white").attr("font-size","12px").attr("x",(function(t,e){return a/3+90*e})).attr("y",15).text((function(t){return t}))}})),Object(o.jsx)("div",{id:"profit-chart",className:"diagram"})};var D=function(t){var e=t.url,n=Object(a.useState)(null),r=Object(j.a)(n,2),c=r[0],i=r[1],s=Object(a.useState)(!1),l=Object(j.a)(s,2),d=l[0],u=l[1],h=Object(a.useState)(null),p=Object(j.a)(h,2),f=p[0],b=p[1];return Object(a.useEffect)((function(){u(!0);var t="";Object.keys(e).forEach((function(n){t+="&"+n+"="+e[n]})),fetch("http://localhost:9000/api/profit?size=55000"+t).then((function(t){return t.json()})).then(i).then((function(){return u(!1)})).catch(b)}),[e]),f?Object(o.jsx)("pre",{children:JSON.stringify(f,null,2)}):Object(o.jsxs)("section",{id:"charts",children:[d&&Object(o.jsx)("p",{children:"LOADING..."}),!d&&Object(o.jsx)(F,{data:c})]})};var M=function(t){var e=t.setUrl,n={acting:"Lead actor",directing:"Director teams",production:"Production teams",writing:"Writer teams"},r=Object(a.useState)("acting"),c=Object(j.a)(r,2),i=c[0],s=c[1],l=function(t){return i===t},d=Object(a.useCallback)((function(t){s(t.target.id),e({dataset:t.target.id})}),[e,s]);return Object(o.jsxs)("div",{className:"sticky-top pt-3",children:[Object(o.jsx)("h3",{children:"Select data grouping:"}),Object.keys(n).map((function(t){return Object(o.jsx)("button",{className:"timespan"+(l(t)?" active":""),id:t,onClick:d,children:n[t]},t)}))]})};var S=function(t){var e,n=t.url,r=Object(a.useState)(!1),c=Object(j.a)(r,2),i=c[0],s=c[1],l=function(){return s(!1)};switch(n.dataset){case"acting":e="lead actors";break;case"directing":e="director teams";break;case"writing":e="writer teams";break;case"production":e="production teams";break;default:e=n.dataset}var d=Object(o.jsxs)(o.Fragment,{children:["This chart shows the average budget and revenue ",Object(o.jsx)("strong",{children:"(adjusted for inflation)"})," of movies from 1913 - 2021 grouped by the ",Object(o.jsxs)("strong",{children:[e,"' gender"]}),". Each shape represents one genre and you can hover over them for more information. ",Object(o.jsx)(O.a,{variant:"info",onClick:function(){return s(!0)},children:"Click here to read more."})]});return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("h2",{className:"text-center mb-0",children:["Average budget and revenue of movie genres grouped by ",e,"' gender"]}),Object(o.jsx)("p",{className:"text-center",children:"Double click or use your mousewheel to zoom in"}),Object(o.jsx)(g,{text:d}),Object(o.jsxs)(y.a,{show:i,onHide:l,children:[Object(o.jsx)(y.a.Header,{closeButton:!0,children:Object(o.jsx)(y.a.Title,{children:Object(o.jsx)("h2",{className:"mb-0",children:"How this chart was made"})})}),Object(o.jsxs)(y.a.Body,{children:[Object(o.jsx)("p",{children:"This chart is based on data of movies from many different countries which were taken from the TMDb.org database."}),Object(o.jsxs)("p",{children:["The movies were grouped into ",Object(o.jsx)("strong",{children:"movie genres"})," and the ",Object(o.jsx)("strong",{children:"gender"})," of the ",e,". Movies without genres, budget and revenue data were excluded."]}),Object(o.jsx)("p",{children:"Movies with multiple genres were counted once for each of their genres."}),Object(o.jsxs)("p",{children:["The numbers are ",Object(o.jsx)("strong",{children:"adjusted for inflation"})," by taking the CPI (Consumer Price Index) of their release date and the mean value was calculated."]}),Object(o.jsx)("p",{children:"For the dataset with lead actors, the first actor listed in the credits was assumed to be the lead actor and selected to analyze."}),Object(o.jsx)("p",{children:'For the dataset with other departments, the data was grouped by teams with "only women", "only men" and "mixed gender" (women and men).'}),Object(o.jsx)("p",{children:"Unfortunately there was not enough data for non-binary people to show in this chart."})]}),Object(o.jsx)(y.a.Footer,{children:Object(o.jsx)(O.a,{variant:"primary",onClick:l,children:"Close"})})]})]})};var T=function(){var t=Object(a.useState)({start:1920,end:2020,genre:"all",dep:"all",category:"none"}),e=Object(j.a)(t,2),n=e[0],r=e[1],c=Object(a.useState)({dataset:"crew",time:2010}),l=Object(j.a)(c,2),d=l[0],u=l[1],h=Object(a.useState)({dataset:"acting"}),p=Object(j.a)(h,2),f=p[0],b=p[1];return Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{className:"col",children:Object(o.jsxs)("section",{id:"sidebar",children:[Object(o.jsx)("h2",{children:"Filters"}),Object(o.jsxs)(i.a,{children:[Object(o.jsx)(s.a,{path:"/time",render:function(){return Object(o.jsx)(x,{setUrl:r})}}),Object(o.jsx)(s.a,{path:"/genres",render:function(){return Object(o.jsx)(A,{setUrl:u})}}),Object(o.jsx)(s.a,{path:"/profit",render:function(){return Object(o.jsx)(M,{setUrl:b})}})]})]})}),Object(o.jsx)("div",{className:"col-12 col-lg-9 order-lg-first",children:Object(o.jsxs)("section",{id:"charts",children:[Object(o.jsxs)(i.a,{children:[Object(o.jsx)(s.a,{path:"/time",render:function(){return Object(o.jsx)(v,{url:n})}}),Object(o.jsx)(s.a,{path:"/genres",render:function(){return Object(o.jsx)(N,{url:d})}}),Object(o.jsx)(s.a,{path:"/profit",render:function(){return Object(o.jsx)(S,{url:f})}})]}),Object(o.jsxs)(i.a,{children:[Object(o.jsx)(s.a,{path:"/time",render:function(){return Object(o.jsx)(m,{url:n})}}),Object(o.jsx)(s.a,{path:"/genres",render:function(){return Object(o.jsx)(k,{url:d})}}),Object(o.jsx)(s.a,{path:"/profit",render:function(){return Object(o.jsx)(D,{url:f})}})]})]})})]})};n(215);var z=function(){return Object(o.jsx)(i.a,{children:Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(l,{}),Object(o.jsx)(s.a,{path:"/",component:h,exact:!0}),Object(o.jsx)(s.a,{path:"/time",component:T}),Object(o.jsx)(s.a,{path:"/genres",component:T}),Object(o.jsx)(s.a,{path:"/profit",component:T}),Object(o.jsx)(d,{})]})})};c.a.render(Object(o.jsx)(z,{}),document.getElementById("root"))}},[[216,1,2]]]);
//# sourceMappingURL=main.17033932.chunk.js.map